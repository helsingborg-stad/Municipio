!function(){tinymce.PluginManager.add("print_break",function(e,t){e.addButton("printbreak",{text:"",icon:"wp_page",context:"insert",tooltip:"Print Break",onclick:function(t){e.execCommand("Print_Break")}}),e.addCommand("Print_Break",function(){var t,n,r="printbreak",a="Print Break",i="wp-print-break-tag mce-wp-"+r,o=e.dom,c=e.selection.getNode();return n='<img src="'+tinymce.Env.transparentSrc+'" alt="" title="'+a+'" class="'+i+'" data-mce-resize="false" data-mce-placeholder="1" data-wp-more="printbreak" />',"BODY"===c.nodeName||"P"===c.nodeName&&"BODY"===c.parentNode.nodeName?void e.insertContent(n):(t=o.getParent(c,function(e){return!(!e.parentNode||"BODY"!==e.parentNode.nodeName)},e.getBody()),void(t&&("P"===t.nodeName?t.appendChild(o.create("p",null,n).firstChild):o.insertAfter(o.create("p",null,n),t),e.nodeChanged())))}),e.on("BeforeSetContent",function(e){var t;e.content&&-1!==e.content.indexOf("<!--printbreak-->")&&(t="Print Break",e.content=e.content.replace(/<!--printbreak-->/g,'<img src="'+tinymce.Env.transparentSrc+'" class="wp-print-break-tag mce-wp-printbreak" alt="" title="'+t+'" data-wp-more="printbreak" data-mce-resize="false" data-mce-placeholder="1" />'))}),e.on("PostProcess",function(e){e.get&&(e.content=e.content.replace(/<img[^>]+>/g,function(e){var t;return-1!==e.indexOf('data-wp-more="printbreak"')&&(t="<!--printbreak-->"),t||e}))})})}();