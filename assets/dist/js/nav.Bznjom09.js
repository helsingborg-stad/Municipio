var __defProp=Object.defineProperty;var __name=(target,value)=>__defProp(target,"name",{value,configurable:!0});import{n as newEndpoint,N as NameSpace}from"../newEndpoint.C_IL8L5Q.js";const viewRender=newEndpoint({nameSpace:NameSpace.MUNICIPIO_V1,route:"view/render",method:"GET"}),SELECTOR_TOGGLE_BUTTON=".js-async-children",ATTRIBUTE_FETCH_URL="data-fetch-url";let placeholderMarkup=null;const fetchMarkup=__name(async(url,useNonce=!0)=>{const headers={"content-type":"application/json"};useNonce&&(headers["X-WP-Nonce"]=wpApiSettings?.nonce);try{const response=await fetch(url,{method:"GET",credentials:"include",headers});if(!response.ok){if(useNonce)return fetchMarkup(url,!1);throw new Error(`Fetch failed with status: ${response.status}`)}const{markup}=await response.json();return markup}catch(error){if(useNonce)return fetchMarkup(url,!1);throw error}},"fetchMarkup");function stringToHTML(str){return new DOMParser().parseFromString(str,"text/html").body.firstChild}__name(stringToHTML,"stringToHTML");const getPlaceholderMarkup=__name(async()=>viewRender.call({routeParams:"partials/preloader"}).then(htmlString=>stringToHTML(htmlString)).catch(error=>(console.error(error.message),null)),"getPlaceholderMarkup"),appendPlaceholder=__name(async placementElement=>{if(placeholderMarkup===null)return;const clone=placeholderMarkup.cloneNode(!0);placementElement.insertAdjacentElement("beforeend",clone)},"appendPlaceholder"),removePlaceholder=__name(placementElement=>{const placeholder=placementElement.querySelector(".preloader");placeholder!==null&&placeholder.remove()},"removePlaceholder"),insertSubMenu=__name((placementElement,markup)=>{placementElement.insertAdjacentHTML("beforeend",markup)},"insertSubMenu"),subscribeOnClick=__name(element=>{const handleClick=__name(()=>{const parentElement=element.closest(".js-async-children-data");if(parentElement===null)return;const parentClassNames=[...parentElement.classList],hasFetched=parentClassNames.includes("has-fetched");if(parentClassNames.includes("is-fetching")||hasFetched)return;const fetchUrl=parentElement.getAttribute(ATTRIBUTE_FETCH_URL);if(!fetchUrl){console.error("Fetch URL is not defined.");return}const customPlacement=parentElement.querySelector("[data-js-async-children]"),placement=customPlacement&&customPlacement.parentElement?customPlacement.parentElement:parentElement;appendPlaceholder(placement),parentElement.classList.add("is-fetching"),parentElement.classList.add("is-loading"),fetchMarkup(fetchUrl).then(markup=>{removePlaceholder(placement),insertSubMenu(placement,markup),requestAnimationFrame(()=>{customPlacement?.remove()}),parentElement.classList.remove("is-fetching"),parentElement.classList.remove("is-loading"),parentElement.classList.add("has-fetched");const newSubMenu=parentElement.lastElementChild;if(newSubMenu){const newToggleButtons=newSubMenu.querySelectorAll(SELECTOR_TOGGLE_BUTTON);newToggleButtons&&newToggleButtons.length>0&&newToggleButtons.forEach(subscribeOnClick)}}).catch(e=>{console.error(e),parentElement.classList.remove("is-fetching"),parentElement.classList.remove("is-loading")})},"handleClick");element.addEventListener("click",handleClick)},"subscribeOnClick");function isCurrentlyBeingTranslated(){const hostChunks=window.location.hostname.split(".");return hostChunks[hostChunks.length-2]+"."+hostChunks[hostChunks.length-1]==="translate.goog"}__name(isCurrentlyBeingTranslated,"isCurrentlyBeingTranslated");const init=__name(async()=>{if(isCurrentlyBeingTranslated()){const languageMenu=document.getElementsByClassName("site-language-menu");languageMenu.length>0&&[...languageMenu].forEach(element=>{element.remove()})}const toggleButtons=document.querySelectorAll(SELECTOR_TOGGLE_BUTTON);placeholderMarkup=await getPlaceholderMarkup(),toggleButtons&&toggleButtons.length>0&&toggleButtons.forEach(subscribeOnClick)},"init");document.addEventListener("DOMContentLoaded",()=>{init()});
//# sourceMappingURL=nav.Bznjom09.js.map
