var __defProp=Object.defineProperty;var __defNormalProp=(obj,key,value)=>key in obj?__defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value;var __name=(target,value)=>__defProp(target,"name",{value,configurable:!0});var __publicField=(obj,key,value)=>__defNormalProp(obj,typeof key!="symbol"?key+"":key,value);import{n as newEndpoint,N as NameSpace}from"../newEndpoint.BVH_olZM.js";const _Fab=class _Fab{showOnScroll(){let fabs=document.getElementsByClassName("c-fab--show-on-scroll");1>fabs.length||(Array.prototype.forEach.call(fabs,fab2=>{window.scrollY>=150&&fab2.classList.remove("u-visibility--hidden"),fab2.addEventListener("click",event=>{window.scrollTo({top:0,behavior:"smooth"})})}),window.addEventListener("scroll",function(event){fabs.forEach(fab2=>{this.window.scrollY>=150?fab2.classList.remove("u-visibility--hidden"):fab2.classList.add("u-visibility--hidden")})}))}};__name(_Fab,"Fab");let Fab=_Fab;const _Comments=class _Comments{static initializeComments(){this.initFancyCancelReply(),this.initCancelReplyOnClick(),this.initLikeComment(),this.initTextareaHeightHandler()}static initFancyCancelReply(){document.querySelectorAll(".comment-reply-link").forEach(replyLink=>{replyLink.addEventListener("click",_Comments.applyFancyStyleToCancelLink)})}static applyFancyStyleToCancelLink(){const cancelLink=document.getElementById("cancel-comment-reply-link");if(cancelLink){const classList=["c-button","u-float--right","c-button__basic","basic--secondary","c-button--md"];cancelLink.classList.add(...classList)}}static initCancelReplyOnClick(){const cancelLink=document.getElementById("cancel-comment-reply-link");cancelLink&&cancelLink.addEventListener("click",_Comments.showReplyButtons)}static showReplyButtons(){document.querySelectorAll(".comment-reply-link").forEach(replyLink=>{replyLink.classList.remove("u-display--none")})}static initTextareaHeightHandler(){const commentTextarea=document.getElementById("comment");commentTextarea&&(commentTextarea.addEventListener("keydown",_Comments.adjustTextareaHeight),commentTextarea.addEventListener("keyup",_Comments.adjustTextareaHeight))}static adjustTextareaHeight(event){const textarea=event.target;if(textarea){const lines=textarea.value.split(/\r\n|\r|\n/).length;textarea.rows=lines}}static initLikeComment(){document.querySelectorAll(".like-button").forEach(likeButton=>{likeButton.addEventListener("click",_Comments.handleLikeButtonClick)})}static handleLikeButtonClick(event){const button=event.currentTarget;if(!button)return;const commentId=button.getAttribute("data-commentid"),commentCounter=document.getElementById(`comment-likes-${commentId}`);if(!commentId||!commentCounter)return;const formData=new FormData;formData.append("action","ajaxLikeMethod"),formData.append("comment_id",commentId),formData.append("nonce",window.likeButtonData.nonce);const params=new URLSearchParams(formData);fetch(window.likeButtonData.ajax_url,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/x-www-form-urlencoded","Cache-Control":"no-cache"},body:params.toString()}).then(response=>response.json()).then(()=>{let likes=parseInt(commentCounter.getAttribute("data-likes")||"0",10);button.classList.contains("active")?(likes--,button.classList.remove("active")):(likes++,button.classList.add("active")),commentCounter.textContent=likes.toString(),commentCounter.setAttribute("data-likes",likes.toString())}).catch(error=>console.error("Error liking comment:",error))}};__name(_Comments,"Comments");let Comments=_Comments;function initializeComments(){document.addEventListener("DOMContentLoaded",()=>{Comments.initializeComments()})}__name(initializeComments,"initializeComments");const language={en:"Language",zh:"语言",hi:"भाषा",es:"Idioma",ar:"لغة",bn:"ভাষা",pt:"Idioma",ru:"Язык",ja:"言語",pa:"ਭਾਸ਼ਾ",de:"Sprache",jv:"Basa",te:"భాష",vi:"Ngôn ngữ",ko:"언어",fr:"Langue",mr:"भाषा",ta:"மொழி",it:"Lingua",tr:"Dil",ur:"زبان",uk:"Мова",ml:"ഭാഷ",tl:"Wika",fa:"زبان",th:"ภาษา",gu:"ભાષા",kn:"ಭಾಷೆ",my:"ဘာသာစကား",or:"ଭାଷା",sd:"ھَسپَر",nl:"Taal",pl:"Język",ro:"Limbă",hu:"Nyelv",sv:"Språk",am:"ቋንቋ",bs:"Jezik",sr:"Језик",hr:"Jezik",ka:"ენა",bg:"Език",el:"Γλώσσα",si:"භාෂාව",mn:"Хэл",mk:"Јазик",lv:"Valoda",lt:"Kalba",et:"Keel",hy:"Լեզու",az:"Dil",eu:"Hizkuntza",be:"Мова",ast:"Llingua",is:"Tungumál",ca:"Llengua",af:"Taal",ga:"Teanga",sm:"Gagana",to:"Lea faka-Tonga",mi:"Reo",haw:"Ōlelo",so:"Luqadda",tn:"Seisimane",st:"Seisimane",zu:"Ulimi",xh:"Ulimi",nso:"Seisimane",ss:"isiSwati",ve:"Lugha",ts:"Xitsonga",sn:"ChiShona",sw:"Kiswahili",yo:"Èdè",ig:"Asụsụ",ak:"Akan",ha:"Harshen",ff:"Pulaar",bm:"Bamanankan",ii:"ꆇꉙ",kl:"Kalaallisut",fy:"Frysk",lb:"Lëtzebuergesch",cy:"Cymraeg",gd:"Gàidhlig",kw:"Kernewek",sco:"Scots",br:"Brezhoneg",oc:"Occitan",rm:"Rumantsch",fur:"Furlan",lij:"Ligure",scn:"Sicilianu",wa:"Walon",nap:"Nnapulitano",lld:"Ladin",frp:"Arpitan",pms:"Piemontèis",eml:"Emigliàn–Rumagnòl",vec:"Vèneto"};function getUserLanguage(){let languageCode=navigator.language||navigator.userLanguage;return languageCode?languageCode.split("-")[0]:null}__name(getUserLanguage,"getUserLanguage");function getTranslation(languageCode){return language&&language[languageCode]?language[languageCode]:null}__name(getTranslation,"getTranslation");function changeLanguageMenuButtonLabel(translation,languageCode){const languageLabel=document.querySelector("#site-language-menu-button .c-button__label-text");languageLabel&&(languageLabel.textContent=translation,languageLabel.setAttribute("lang",languageCode))}__name(changeLanguageMenuButtonLabel,"changeLanguageMenuButtonLabel");function initializeLanguageMenu(){const languageCode=getUserLanguage();if(!languageCode)return;const translation=getTranslation(languageCode);translation&&document.addEventListener("DOMContentLoaded",()=>{changeLanguageMenuButtonLabel(translation,languageCode)})}__name(initializeLanguageMenu,"initializeLanguageMenu");const _CollapsibleSearchForm=class _CollapsibleSearchForm{constructor(container,triggerButton,searchForm,closeButton,searchInput){this.container=container,this.triggerButton=triggerButton,this.searchForm=searchForm,this.closeButton=closeButton,this.searchInput=searchInput;const[firstElement,lastElement]=this.getFocusableElements();this.firstFocusableElement=firstElement,this.lastFocusableElement=lastElement,this.firstFocusableElement&&this.lastFocusableElement&&this.initializeEvents()}lastFocusedElement=null;firstFocusableElement=null;lastFocusableElement=null;isOpen=!1;initializeEvents(){document.addEventListener("click",this.globalClickListener),document.addEventListener("keydown",this.globalKeydownListener),this.triggerButton.addEventListener("click",this.toggleSearchForm),this.closeButton.addEventListener("click",this.closeSearchForm)}toggleSearchForm=__name(e=>{this.isOpen?this.closeSearchForm():this.openSearchForm()},"toggleSearchForm");openSearchForm(){this.isOpen=!0,this.handleIsOpen(),setTimeout(()=>{this.searchInput.focus()},500)}closeSearchForm=__name(()=>{this.isOpen&&(this.isOpen=!1,this.handleIsOpen(),setTimeout(()=>{this.container.classList.remove("is-closing"),this.lastFocusedElement?.focus()},500))},"closeSearchForm");handleIsOpen(){this.isOpen?(this.lastFocusedElement=document.activeElement,this.container.classList.remove("is-closing"),this.searchForm.setAttribute("aria-hidden","false"),this.searchForm.classList.remove("u-visibility--hidden"),this.triggerButton.setAttribute("aria-expanded","true"),this.container.classList.add("is-open")):(this.searchForm.classList.add("u-visibility--hidden"),this.searchInput.blur(),this.container.classList.remove("is-open"),this.searchForm.setAttribute("aria-hidden","true"),this.triggerButton.setAttribute("aria-expanded","false"),this.container.classList.add("is-closing"))}globalClickListener=__name(event=>{const target=event.target;this.isOpen&&!this.searchForm.contains(target)&&!this.triggerButton.contains(target)&&this.closeSearchForm()},"globalClickListener");globalKeydownListener=__name(event=>{this.isOpen&&(event.key==="Escape"?this.closeSearchForm():event.key==="Tab"&&this.trapTabKey(event))},"globalKeydownListener");trapTabKey(event){event.shiftKey?document.activeElement===this.firstFocusableElement&&(event.preventDefault(),this.lastFocusableElement?.focus()):document.activeElement===this.lastFocusableElement&&(event.preventDefault(),this.firstFocusableElement?.focus())}getFocusableElements(){const focusableElements=this.searchForm.querySelectorAll("input, button");return focusableElements.length?[focusableElements[0],focusableElements[focusableElements.length-1]]:[null,null]}};__name(_CollapsibleSearchForm,"CollapsibleSearchForm");let CollapsibleSearchForm=_CollapsibleSearchForm;function initializeCollapsibleSearch(){document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".collapsible-search-form").forEach(collapsibleSearchElement=>{const triggerButton=collapsibleSearchElement.querySelector(".collapsible-search-form__trigger-button"),searchForm=collapsibleSearchElement.querySelector(".collapsible-search-form__form"),closeButton=collapsibleSearchElement.querySelector(".collapsible-search-form__close-button"),searchInput=collapsibleSearchElement.querySelector(".collapsible-search-form input");triggerButton&&searchForm&&closeButton&&searchInput&&new CollapsibleSearchForm(collapsibleSearchElement,triggerButton,searchForm,closeButton,searchInput)})})}__name(initializeCollapsibleSearch,"initializeCollapsibleSearch");const _SessionManager=class _SessionManager{static initLogoutClick(){document.querySelectorAll(".js-action-logout-click").forEach(logoutLink=>{logoutLink.addEventListener("click",_SessionManager.handleLogoutClick)})}static handleLogoutClick(){sessionStorage.setItem("user_logged_out","true")}};__name(_SessionManager,"SessionManager");let SessionManager=_SessionManager;function initializeSessionManager(){document.addEventListener("DOMContentLoaded",()=>{SessionManager.initLogoutClick()})}__name(initializeSessionManager,"initializeSessionManager");const _HashHighlightManager=class _HashHighlightManager{static init(){document.addEventListener("DOMContentLoaded",()=>{const items=document.querySelectorAll("[data-highlight-on-hash-match]");if(!items.length)return;const updateHighlights=__name(()=>{const currentHash=decodeURIComponent(location.hash.replace(/^#/,""));items.forEach(item=>{const targetHash=item.dataset.highlightOnHashMatch,activeClass=item.dataset.highlightOnHashMatchClass??"is-current",shouldBeActive=targetHash===currentHash;item.classList.toggle(activeClass,shouldBeActive)})},"updateHighlights");window.addEventListener("hashchange",updateHighlights),updateHighlights()})}};__name(_HashHighlightManager,"HashHighlightManager"),__publicField(_HashHighlightManager,"lastManualHashChange",0);let HashHighlightManager=_HashHighlightManager;function initializeHashHighlightManager(){HashHighlightManager.init()}__name(initializeHashHighlightManager,"initializeHashHighlightManager");const _HashUpdateManager=class _HashUpdateManager{static init(offset=0){this.offset=offset,document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("[data-update-hash-when-focused]").length&&(window.addEventListener("scroll",()=>this.handleIntersect()),window.addEventListener("resize",()=>this.handleIntersect()))})}static handleIntersect(){const elements=document.querySelectorAll("[data-update-hash-when-focused]");if(elements.length===0)return;let candidate=null,candidateDistance=-1/0;elements.forEach(el=>{const top=el.getBoundingClientRect().top;top<=this.offset&&top>candidateDistance&&(candidate=el,candidateDistance=top)}),candidate||(candidate=elements[0]);const newHash=candidate.dataset.updateHashValue??candidate.id;!newHash||this.currentHash===newHash||(this.currentHash=newHash,history.replaceState(null,"",`#${newHash}`),window.dispatchEvent(new HashChangeEvent("hashchange")))}};__name(_HashUpdateManager,"HashUpdateManager"),__publicField(_HashUpdateManager,"currentHash",null),__publicField(_HashUpdateManager,"offset",0);let HashUpdateManager=_HashUpdateManager;function initializeHashUpdateManager(offset=0){HashUpdateManager.init(offset)}__name(initializeHashUpdateManager,"initializeHashUpdateManager");const postsListRender=newEndpoint({nameSpace:NameSpace.MUNICIPIO_V1,route:"posts-list/render",method:"GET"}),_PostsListAsync=class _PostsListAsync{container;attributes;constructor(container){this.container=container,this.attributes=this.parseAttributes(),this.attributes&&(this.setupAccessibility(),this.setupFilterForm(),this.setupPagination())}setupAccessibility(){this.container.setAttribute("aria-live","polite"),this.container.setAttribute("aria-atomic","true")}parseAttributes(){try{return JSON.parse(this.container.dataset.postsListAttributes||"{}")}catch{return{}}}setupFilterForm(){const form=this.container.querySelector("form");form&&form.addEventListener("submit",async e=>{e.preventDefault();const formData=new FormData(form),params=Object.fromEntries(formData.entries());await this.fetchAndReplace(params)})}setupPagination(){this.container.addEventListener("click",async e=>{const link=e.target.closest('a[href*="page"]');if(!link)return;e.preventDefault();const url=new URL(link.getAttribute("href")||"",window.location.origin),params=Object.fromEntries(url.searchParams.entries());await this.fetchAndReplace(params)})}showPreloader(){this.container.querySelectorAll("[data-js-posts-list-item]").forEach(el=>{el.classList.add("u-preloader")})}hidePreloader(){this.container.querySelectorAll(".u-preloader").forEach(el=>{el.classList.remove("u-preloader")})}updateUrlParams(params){const url=new URL(window.location.href);Object.entries(params).forEach(([key,value])=>{value!=null&&value!==""?url.searchParams.set(key,String(value)):url.searchParams.delete(key)}),history.pushState({postsListAsync:!0},"",url.toString())}async fetchAndReplace(params){this.container.classList.add("is-loading"),this.container.setAttribute("aria-busy","true"),this.showPreloader();try{const html=await postsListRender.call({attributes:JSON.stringify(this.attributes),...params}),temp=document.createElement("div");temp.innerHTML=html;const newContent=temp.firstElementChild;newContent&&(newContent.dataset.postsListAsync="true",newContent.dataset.postsListAttributes=JSON.stringify(this.attributes),this.container.replaceWith(newContent),new _PostsListAsync(newContent),this.updateUrlParams(params),newContent.scrollIntoView({behavior:"smooth",block:"start"}))}catch{this.hidePreloader()}finally{this.container.classList.remove("is-loading"),this.container.setAttribute("aria-busy","false")}}};__name(_PostsListAsync,"PostsListAsync");let PostsListAsync=_PostsListAsync;const initPostsListAsync=__name(()=>{document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll('[data-posts-list-async="true"]').forEach(container=>{new PostsListAsync(container)})})},"initPostsListAsync"),fab=new Fab;fab.showOnScroll();initializeLanguageMenu();initializeSessionManager();initializeComments();initializeCollapsibleSearch();initializeHashHighlightManager();initializeHashUpdateManager(80);initPostsListAsync();
//# sourceMappingURL=municipio.NDA8ICb1.js.map
