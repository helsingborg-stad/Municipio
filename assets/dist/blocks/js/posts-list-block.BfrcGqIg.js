var __defProp=Object.defineProperty;var __name=(target,value)=>__defProp(target,"name",{value,configurable:!0});(function(blocks,require$$0,apiFetch,blockEditor,element,i18n,components,data,coreData){"use strict";var jsxRuntime={exports:{}},reactJsxRuntime_production_min={};var hasRequiredReactJsxRuntime_production_min;function requireReactJsxRuntime_production_min(){if(hasRequiredReactJsxRuntime_production_min)return reactJsxRuntime_production_min;hasRequiredReactJsxRuntime_production_min=1;var f=require$$0,k=Symbol.for("react.element"),l=Symbol.for("react.fragment"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};function q(c,a,g){var b,d={},e=null,h=null;g!==void 0&&(e=""+g),a.key!==void 0&&(e=""+a.key),a.ref!==void 0&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)d[b]===void 0&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}return __name(q,"q"),reactJsxRuntime_production_min.Fragment=l,reactJsxRuntime_production_min.jsx=q,reactJsxRuntime_production_min.jsxs=q,reactJsxRuntime_production_min}__name(requireReactJsxRuntime_production_min,"requireReactJsxRuntime_production_min");var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production_min()),jsxRuntime.exports}__name(requireJsxRuntime,"requireJsxRuntime");var jsxRuntimeExports=requireJsxRuntime();const PostsListContext=require$$0.createContext({getPostTypeMetaKeys:__name(_postType=>{throw new Error("postTypeMetaKeys not implemented")},"getPostTypeMetaKeys")}),createGetPostTypeMetaKeys=__name(fetch=>({getPostTypeMetaKeys:__name(async postType=>fetch.fetch({path:`/municipio/v1/meta-keys/${postType}`}),"getPostTypeMetaKeys")}),"createGetPostTypeMetaKeys"),PostsListContextProvider=__name(({gptmk,children})=>jsxRuntimeExports.jsx(PostsListContext.Provider,{value:gptmk,children}),"PostsListContextProvider");var debounce=__name((func,wait,options)=>{let lastArgs,lastThis,result,timerId,lastCallTime,maxing=!1;function invokeFunc(time){const args=lastArgs,thisArg=lastThis;return lastArgs=void 0,lastThis=void 0,result=func.apply(thisArg,args),result}__name(invokeFunc,"invokeFunc");function startTimer(pendingFunc,waitTime){timerId=setTimeout(pendingFunc,waitTime)}__name(startTimer,"startTimer");function cancelTimer(){timerId!==void 0&&clearTimeout(timerId)}__name(cancelTimer,"cancelTimer");function leadingEdge(time){return startTimer(timerExpired,wait),result}__name(leadingEdge,"leadingEdge");function getTimeSinceLastCall(time){return time-(lastCallTime||0)}__name(getTimeSinceLastCall,"getTimeSinceLastCall");function remainingWait(time){const timeSinceLastCall=getTimeSinceLastCall(time);return wait-timeSinceLastCall}__name(remainingWait,"remainingWait");function shouldInvoke(time){const timeSinceLastCall=getTimeSinceLastCall(time);return lastCallTime===void 0||timeSinceLastCall>=wait||timeSinceLastCall<0||maxing}__name(shouldInvoke,"shouldInvoke");function timerExpired(){const time=Date.now();if(shouldInvoke(time))return trailingEdge();startTimer(timerExpired,remainingWait(time))}__name(timerExpired,"timerExpired");function clearTimer(){timerId=void 0}__name(clearTimer,"clearTimer");function trailingEdge(time){return clearTimer(),lastArgs?invokeFunc():(lastArgs=lastThis=void 0,result)}__name(trailingEdge,"trailingEdge");function cancel(){cancelTimer(),clearTimer(),lastArgs=lastCallTime=lastThis=void 0}__name(cancel,"cancel");function flush(){return pending()?trailingEdge():result}__name(flush,"flush");function pending(){return timerId!==void 0}__name(pending,"pending");function debounced(...args){const time=Date.now(),isInvoking=shouldInvoke(time);return lastArgs=args,lastThis=this,lastCallTime=time,isInvoking&&!pending()?leadingEdge():(pending()||startTimer(timerExpired,wait),result)}return __name(debounced,"debounced"),debounced.cancel=cancel,debounced.flush=flush,debounced.pending=pending,debounced},"debounce");function getQueryString(url){let query;try{query=new URL(url,"http://example.com").search.substring(1)}catch{}if(query)return query}__name(getQueryString,"getQueryString");function buildQueryString(data2){let string="";const stack=Object.entries(data2);let pair;for(;pair=stack.shift();){let[key,value]=pair;if(Array.isArray(value)||value&&value.constructor===Object){const valuePairs=Object.entries(value).reverse();for(const[member,memberValue]of valuePairs)stack.unshift([`${key}[${member}]`,memberValue])}else value!==void 0&&(value===null&&(value=""),string+="&"+[key,String(value)].map(encodeURIComponent).join("="))}return string.substr(1)}__name(buildQueryString,"buildQueryString");function getFragment(url){const matches=/^\S+?(#[^\s\?]*)/.exec(url);if(matches)return matches[1]}__name(getFragment,"getFragment");function safeDecodeURIComponent(uriComponent){try{return decodeURIComponent(uriComponent)}catch{return uriComponent}}__name(safeDecodeURIComponent,"safeDecodeURIComponent");function setPath(object,path,value){const length=path.length,lastIndex=length-1;for(let i=0;i<length;i++){let key=path[i];!key&&Array.isArray(object)&&(key=object.length.toString()),key=["__proto__","constructor","prototype"].includes(key)?key.toUpperCase():key;const isNextKeyArrayIndex=!isNaN(Number(path[i+1]));object[key]=i===lastIndex?value:object[key]||(isNextKeyArrayIndex?[]:{}),Array.isArray(object[key])&&!isNextKeyArrayIndex&&(object[key]={...object[key]}),object=object[key]}}__name(setPath,"setPath");function getQueryArgs(url){return(getQueryString(url)||"").replace(/\+/g,"%20").split("&").reduce((accumulator,keyValue)=>{const[key,value=""]=keyValue.split("=").filter(Boolean).map(safeDecodeURIComponent);if(key){const segments=key.replace(/\]/g,"").split("[");setPath(accumulator,segments,value)}return accumulator},Object.create(null))}__name(getQueryArgs,"getQueryArgs");function addQueryArgs(url="",args){if(!args||!Object.keys(args).length)return url;const fragment=getFragment(url)||"";let baseUrl=url.replace(fragment,"");const queryStringIndex=url.indexOf("?");return queryStringIndex!==-1&&(args=Object.assign(getQueryArgs(url),args),baseUrl=baseUrl.substr(0,queryStringIndex)),baseUrl+"?"+buildQueryString(args)+fragment}__name(addQueryArgs,"addQueryArgs");function rendererPath(block,attributes=null,urlQueryArgs={}){return addQueryArgs(`/wp/v2/block-renderer/${block}`,{context:"edit",...attributes!==null?{attributes}:{},...urlQueryArgs})}__name(rendererPath,"rendererPath");function removeBlockSupportAttributes(attributes){const{backgroundColor,borderColor,fontFamily,fontSize,gradient,textColor,className,...restAttributes}=attributes,{border,color,elements,shadow,spacing,typography,...restStyles}=attributes?.style||{};return{...restAttributes,style:restStyles}}__name(removeBlockSupportAttributes,"removeBlockSupportAttributes");function useServerSideRender(args){const[response,setResponse]=element.useState({status:"idle"}),shouldDebounceRef=element.useRef(!1),{attributes,block,skipBlockSupportAttributes=!1,httpMethod="GET",urlQueryArgs}=args;let sanitizedAttributes=attributes&&blocks.__experimentalSanitizeBlockAttributes(block,attributes);skipBlockSupportAttributes&&(sanitizedAttributes=removeBlockSupportAttributes(sanitizedAttributes));const isPostRequest=httpMethod==="POST",path=rendererPath(block,isPostRequest?null:sanitizedAttributes,urlQueryArgs),body=isPostRequest?JSON.stringify({attributes:sanitizedAttributes??null}):void 0;return element.useEffect(()=>{const controller=new AbortController,debouncedFetch=debounce(function(){setResponse({status:"loading"}),apiFetch({path,method:isPostRequest?"POST":"GET",body,headers:isPostRequest?{"Content-Type":"application/json"}:{},signal:controller.signal}).then(res=>{setResponse({status:"success",content:res?res.rendered:""})}).catch(error=>{error.name!=="AbortError"&&setResponse({status:"error",error:error.message})}).finally(()=>{shouldDebounceRef.current=!0})},shouldDebounceRef.current?500:0);return debouncedFetch(),()=>{controller.abort(),debouncedFetch.cancel()}},[path,isPostRequest,body]),response}__name(useServerSideRender,"useServerSideRender");var EMPTY_OBJECT={};function DefaultEmptyResponsePlaceholder({className}){return jsxRuntimeExports.jsx(components.Placeholder,{className,children:i18n.__("Block rendered as empty.")})}__name(DefaultEmptyResponsePlaceholder,"DefaultEmptyResponsePlaceholder");function DefaultErrorResponsePlaceholder({message,className}){const errorMessage=i18n.sprintf(i18n.__("Error loading block: %s"),message);return jsxRuntimeExports.jsx(components.Placeholder,{className,children:errorMessage})}__name(DefaultErrorResponsePlaceholder,"DefaultErrorResponsePlaceholder");function DefaultLoadingResponsePlaceholder({children}){const[showLoader,setShowLoader]=element.useState(!1);return element.useEffect(()=>{const timeout=setTimeout(()=>{setShowLoader(!0)},1e3);return()=>clearTimeout(timeout)},[]),jsxRuntimeExports.jsxs("div",{style:{position:"relative"},children:[showLoader&&jsxRuntimeExports.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",marginTop:"-9px",marginLeft:"-9px"},children:jsxRuntimeExports.jsx(components.Spinner,{})}),jsxRuntimeExports.jsx("div",{style:{opacity:showLoader?"0.3":1},children})]})}__name(DefaultLoadingResponsePlaceholder,"DefaultLoadingResponsePlaceholder");function ServerSideRender(props){const prevContentRef=element.useRef(""),{className,EmptyResponsePlaceholder=DefaultEmptyResponsePlaceholder,ErrorResponsePlaceholder=DefaultErrorResponsePlaceholder,LoadingResponsePlaceholder=DefaultLoadingResponsePlaceholder,...restProps}=props,{content,status,error}=useServerSideRender(restProps);return element.useEffect(()=>{content&&(prevContentRef.current=content)},[content]),status==="loading"?jsxRuntimeExports.jsx(LoadingResponsePlaceholder,{...props,children:!!prevContentRef.current&&jsxRuntimeExports.jsx(element.RawHTML,{className,children:prevContentRef.current})}):status==="success"&&!content?jsxRuntimeExports.jsx(EmptyResponsePlaceholder,{...props}):status==="error"?jsxRuntimeExports.jsx(ErrorResponsePlaceholder,{message:error,...props}):jsxRuntimeExports.jsx(element.RawHTML,{className,children:content})}__name(ServerSideRender,"ServerSideRender");function ServerSideRenderWithPostId({urlQueryArgs=EMPTY_OBJECT,...props}){const currentPostId=data.useSelect(select=>{const postId=select("core/editor")?.getCurrentPostId();return postId&&typeof postId=="number"?postId:null},[]),newUrlQueryArgs=element.useMemo(()=>currentPostId?{post_id:currentPostId,...urlQueryArgs}:urlQueryArgs,[currentPostId,urlQueryArgs]);return jsxRuntimeExports.jsx(ServerSideRender,{urlQueryArgs:newUrlQueryArgs,...props})}__name(ServerSideRenderWithPostId,"ServerSideRenderWithPostId");var ServerSideRenderCompat=ServerSideRenderWithPostId;ServerSideRenderCompat.ServerSideRender=ServerSideRenderWithPostId,ServerSideRenderCompat.useServerSideRender=useServerSideRender;var index_default=ServerSideRenderCompat;const PreventClickOnChildren=__name(({children})=>jsxRuntimeExports.jsxs("div",{style:{pointerEvents:"none"},children:[" ",children," "]}),"PreventClickOnChildren"),Shrink=__name(({children,active,scale=.95})=>{const style={transform:active?`scale(${scale})`:"scale(1)",transition:"transform 0.1s ease-in-out"};return jsxRuntimeExports.jsxs("div",{style,children:[" ",children," "]})},"Shrink"),LoadingPlaceholder=__name(()=>jsxRuntimeExports.jsx("div",{className:"u-preloader",style:{height:"300px"}}),"LoadingPlaceholder"),PostsListServerSideRender=__name(props=>{const{isSelected}=props;return jsxRuntimeExports.jsx("div",{...blockEditor.useBlockProps(),children:jsxRuntimeExports.jsx(PreventClickOnChildren,{children:jsxRuntimeExports.jsx(Shrink,{active:isSelected,children:jsxRuntimeExports.jsx(index_default,{block:props.name,attributes:props.attributes,LoadingResponsePlaceholder:LoadingPlaceholder})})})})},"PostsListServerSideRender"),dateFormatOptions=[{label:i18n.__("Date","municipio"),value:"date"},{label:i18n.__("Time","municipio"),value:"time"},{label:i18n.__("Date, time","municipio"),value:"date-time"},{label:i18n.__("Date badge","municipio"),value:"date-badge"}],DateFormatControl=__name(({dateFormat,onChange})=>jsxRuntimeExports.jsx(components.SelectControl,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,label:i18n.__("Date format","municipio"),value:dateFormat,options:dateFormatOptions,onChange:__name(value=>onChange(value),"onChange")}),"DateFormatControl"),dateSourceOptions=[{label:i18n.__("Date Published","municipio"),value:"post_date"},{label:i18n.__("Date Modified","municipio"),value:"post_modified"}],DateSourceControl=__name(({postType,dateSource,onChange})=>{const{getPostTypeMetaKeys}=require$$0.useContext(PostsListContext),[metaKeysAsOptions,setMetaKeysAsOptions]=require$$0.useState([]);return require$$0.useEffect(()=>{getPostTypeMetaKeys(postType).then(metaKeys=>{setMetaKeysAsOptions(Object.values(metaKeys).map(key=>({label:i18n.__(`meta: ${key}`,"municipio"),value:key})))})},[getPostTypeMetaKeys,postType]),jsxRuntimeExports.jsx(components.SelectControl,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,label:i18n.__("Date source","municipio"),value:dateSource,options:[...dateSourceOptions,...metaKeysAsOptions],onChange:__name(value=>onChange(value),"onChange")})},"DateSourceControl"),designOptions=[{label:i18n.__("Card","municipio"),value:"card"},{label:i18n.__("Compressed","municipio"),value:"compressed"},{label:i18n.__("Collection","municipio"),value:"collection"},{label:i18n.__("Block","municipio"),value:"block"},{label:i18n.__("Newsitem","municipio"),value:"newsitem"},{label:i18n.__("Schema","municipio"),value:"schema"},{label:i18n.__("Table","municipio"),value:"table"}],numberOfColumnsOptions=[{label:"1",value:"1"},{label:"2",value:"2"},{label:"3",value:"3"},{label:"4",value:"4"}],AppearanceSettingsPanel=__name(({attributes:{numberOfColumns,design,dateFormat,dateSource,postType},setAttributes})=>{const allowSelectColumns=design!=="table";return jsxRuntimeExports.jsxs(components.PanelBody,{title:i18n.__("Appearance settings","municipio"),children:[jsxRuntimeExports.jsx(components.SelectControl,{label:i18n.__("Design","municipio"),options:designOptions,value:String(design||"card"),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,onChange:__name(value=>setAttributes({design:value}),"onChange")}),jsxRuntimeExports.jsx(components.SelectControl,{disabled:!allowSelectColumns,label:i18n.__("Number of columns","municipio"),options:numberOfColumnsOptions,value:String(numberOfColumns||3),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,onChange:__name(value=>setAttributes({numberOfColumns:Number(value)}),"onChange")}),jsxRuntimeExports.jsx(DateSourceControl,{postType,dateSource,onChange:__name(value=>setAttributes({dateSource:value}),"onChange")}),jsxRuntimeExports.jsx(DateFormatControl,{dateFormat,onChange:__name(value=>setAttributes({dateFormat:value}),"onChange")})]})},"AppearanceSettingsPanel");var icon_default=element.forwardRef(({icon,size=24,...props},ref)=>element.cloneElement(icon,{width:size,height:size,...props,ref}));function r(e){var t,f,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(f=r(e[t]))&&(n&&(n+=" "),n+=f)}else for(f in e)e[f]&&(n&&(n+=" "),n+=f);return n}__name(r,"r");function clsx(){for(var e,t,f=0,n="",o=arguments.length;f<o;f++)(e=arguments[f])&&(t=r(e))&&(n&&(n+=" "),n+=t);return n}__name(clsx,"clsx");var Path=__name(props=>element.createElement("path",props),"Path"),SVG=element.forwardRef(({className,isPressed,...props},ref)=>{const appliedProps={...props,className:clsx(className,{"is-pressed":isPressed})||void 0,"aria-hidden":!0,focusable:!1};return jsxRuntimeExports.jsx("svg",{...appliedProps,ref})});SVG.displayName="SVG";var arrow_down_default=jsxRuntimeExports.jsx(SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx(Path,{d:"m16.5 13.5-3.7 3.7V4h-1.5v13.2l-3.8-3.7-1 1 5.5 5.6 5.5-5.6z"})}),arrow_up_default=jsxRuntimeExports.jsx(SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx(Path,{d:"M12 3.9 6.5 9.5l1 1 3.8-3.7V20h1.5V6.8l3.7 3.7 1-1z"})}),not_allowed_default=jsxRuntimeExports.jsx(SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx(Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M12 18.5A6.5 6.5 0 0 1 6.93 7.931l9.139 9.138A6.473 6.473 0 0 1 12 18.5Zm5.123-2.498a6.5 6.5 0 0 0-9.124-9.124l9.124 9.124ZM4 12a8 8 0 1 1 16 0 8 8 0 0 1-16 0Z"})});const RadioIcon=__name(({width,height})=>jsxRuntimeExports.jsxs("svg",{width,height,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("title",{children:"Radio Button Icon"}),jsxRuntimeExports.jsx("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12 19.5C16.1421 19.5 19.5 16.1421 19.5 12C19.5 7.85786 16.1421 4.5 12 4.5C7.85786 4.5 4.5 7.85786 4.5 12C4.5 16.1421 7.85786 19.5 12 19.5ZM12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12C3 16.9706 7.02944 21 12 21Z"}),jsxRuntimeExports.jsx("circle",{cx:"12",cy:"12",r:"5.25"})]}),"RadioIcon"),MultiSelectIcon=__name(({width,height})=>jsxRuntimeExports.jsxs("svg",{width,height,viewBox:"0 0 52 52","enable-background":"new 0 0 52 52",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("title",{children:"Multi Select Icon"}),jsxRuntimeExports.jsx("path",{d:"M44,2.5H19c-2.6,0-4.7,2.1-4.7,4.7V8c0,0.5,0.3,0.8,0.8,0.8h22.7c2.6,0,4.7,2.1,4.7,4.7v24.3c0,0.5,0.3,0.8,0.8,0.8H44c2.6,0,4.7-2.1,4.7-4.7V7.2C48.7,4.6,46.6,2.5,44,2.5z"}),jsxRuntimeExports.jsx("path",{d:"M33,13.5H8c-2.6,0-4.7,2.1-4.7,4.7v26.6c0,2.6,2.1,4.7,4.7,4.7H33c2.6,0,4.7-2.1,4.7-4.7V18.2C37.8,15.6,35.6,13.5,33,13.5z M31,26.8l-12,12c-0.5,0.5-1,0.7-1.6,0.7c-0.5,0-1.2-0.2-1.6-0.7l-5.8-5.8c-0.5-0.5-0.5-1.2,0-1.6l1.6-1.6c0.5-0.5,1.2-0.5,1.6,0l4.2,4.2l10.3-10.3c0.5-0.5,1.2-0.5,1.6,0l1.6,1.6C31.4,25.6,31.4,26.4,31,26.8z"})]}),"MultiSelectIcon"),FilterTaxonomyControl=__name(({taxonomy,filterType,onChange})=>jsxRuntimeExports.jsxs(components.__experimentalToggleGroupControl,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,isBlock:!0,value:filterType??"disabled",label:`Filter type for ${taxonomy.name}`,onChange:__name(value=>{onChange(value==="disabled"?null:{taxonomy:taxonomy.slug,type:value})},"onChange"),children:[jsxRuntimeExports.jsx(components.__experimentalToggleGroupControlOptionIcon,{value:"disabled",label:i18n.__("Disable","municipio"),icon:jsxRuntimeExports.jsx(icon_default,{icon:not_allowed_default}),"aria-label":i18n.__("Disable","municipio")}),jsxRuntimeExports.jsx(components.__experimentalToggleGroupControlOptionIcon,{value:"multi",label:i18n.__("Checkboxes","municipio"),icon:jsxRuntimeExports.jsx(icon_default,{icon:jsxRuntimeExports.jsx(MultiSelectIcon,{})}),"aria-label":i18n.__("Checkboxes","municipio")}),jsxRuntimeExports.jsx(components.__experimentalToggleGroupControlOptionIcon,{value:"single",label:i18n.__("Radio buttons","municipio"),icon:jsxRuntimeExports.jsx(icon_default,{icon:jsxRuntimeExports.jsx(RadioIcon,{})}),"aria-label":i18n.__("Radio buttons","municipio")})]}),"FilterTaxonomyControl"),useFilterTaxonomyControlGroup=__name(postType=>({taxonomies:data.select(coreData.store).getTaxonomies({per_page:-1})?.filter(taxonomy=>taxonomy.types.includes(postType))||[]}),"useFilterTaxonomyControlGroup"),FilterTaxonomyControlGroup=__name(({postType,value,onChange})=>{const{taxonomies}=useFilterTaxonomyControlGroup(postType),handleChange=__name((filter,taxonomySlug)=>{let newFilters=value.filter(item=>item.taxonomy!==taxonomySlug);filter&&newFilters.push(filter),onChange(newFilters)},"handleChange"),controls=taxonomies.map(taxonomy=>jsxRuntimeExports.jsx(FilterTaxonomyControl,{taxonomy,filterType:value.find(filter=>filter.taxonomy===taxonomy.slug)?.type,onChange:__name(filter=>handleChange(filter,taxonomy.slug),"onChange")},taxonomy.slug));return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:controls})},"FilterTaxonomyControlGroup"),FilterSettingsPanel=__name(({attributes:{textSearchEnabled,dateFilterEnabled,taxonomiesEnabledForFiltering,postType},setAttributes})=>jsxRuntimeExports.jsxs(components.PanelBody,{title:i18n.__("Filter settings","municipio"),children:[jsxRuntimeExports.jsx(components.ToggleControl,{label:i18n.__("Enable text search","municipio"),checked:textSearchEnabled||!1,__nextHasNoMarginBottom:!0,onChange:__name(value=>setAttributes({textSearchEnabled:value}),"onChange")}),jsxRuntimeExports.jsx(components.ToggleControl,{label:i18n.__("Enable date filter","municipio"),checked:dateFilterEnabled||!1,__nextHasNoMarginBottom:!0,onChange:__name(value=>setAttributes({dateFilterEnabled:value}),"onChange")}),jsxRuntimeExports.jsx(FilterTaxonomyControlGroup,{postType,value:taxonomiesEnabledForFiltering,onChange:__name(value=>setAttributes({taxonomiesEnabledForFiltering:value}),"onChange")})]}),"FilterSettingsPanel"),orderByOptions=[{label:i18n.__("Date Published","municipio"),value:"date"},{label:i18n.__("Title","municipio"),value:"title"},{label:i18n.__("DateModified","municipio"),value:"modified"}],OrderByControl=__name(({postType,orderBy,onChange})=>{const{getPostTypeMetaKeys}=require$$0.useContext(PostsListContext),[metaKeysAsOptions,setMetaKeysAsOptions]=require$$0.useState([]);return require$$0.useEffect(()=>{getPostTypeMetaKeys(postType).then(metaKeys=>{setMetaKeysAsOptions(Object.values(metaKeys).map(key=>({label:i18n.__(`meta: ${key}`,"municipio"),value:key})))})},[getPostTypeMetaKeys,postType]),jsxRuntimeExports.jsx(components.SelectControl,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,label:i18n.__("Order by","municipio"),value:orderBy,options:[...orderByOptions,...metaKeysAsOptions],onChange:__name(value=>onChange(value),"onChange")})},"OrderByControl"),OrderControl=__name(({order,onChange})=>jsxRuntimeExports.jsxs(components.__experimentalToggleGroupControl,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,isBlock:!0,value:order,label:i18n.__("Order","municipio"),onChange:__name(value=>onChange(value),"onChange"),children:[jsxRuntimeExports.jsx(components.__experimentalToggleGroupControlOptionIcon,{value:"asc",label:i18n.__("Ascending","municipio"),icon:jsxRuntimeExports.jsx(icon_default,{icon:arrow_up_default}),"aria-label":i18n.__("Ascending","municipio")}),jsxRuntimeExports.jsx(components.__experimentalToggleGroupControlOptionIcon,{value:"desc",label:i18n.__("Descending","municipio"),icon:jsxRuntimeExports.jsx(icon_default,{icon:arrow_down_default}),"aria-label":i18n.__("Descending","municipio")})]}),"OrderControl"),PostTypeSelectControl=__name(props=>{const postTypeOptions=data.useSelect(select=>(select(coreData.store).getPostTypes({per_page:-1})||[]).filter(postType=>postType.viewable).map(postType=>({label:postType.labels.singular_name,value:postType.slug})),[coreData.store])||[];return jsxRuntimeExports.jsx(components.SelectControl,{...props,options:postTypeOptions})},"PostTypeSelectControl"),useTermSelectControl=__name(taxonomy=>{const termOptions=data.useSelect(select=>{const terms=select(coreData.store).getEntityRecords("taxonomy",taxonomy.slug,{per_page:-1});return terms?terms.map(term=>({label:term.name,value:term.id})):[]},[taxonomy.slug]),validateTokenInput=require$$0.useCallback(token=>termOptions.some(term=>term.label===token),[termOptions]),mapTermLabelsToTermIds=require$$0.useCallback(labels=>labels.map(label=>{const foundTerm=termOptions.find(term=>term.label===label);return foundTerm?foundTerm.value:null}).filter(value=>value!==null),[termOptions]),mapTermIdsToTermLabels=require$$0.useCallback(ids=>ids.map(id=>{const foundTerm=termOptions.find(term=>term.value===id);return foundTerm?foundTerm.label:""}),[termOptions]),showControl=require$$0.useCallback(()=>termOptions.length>0,[termOptions]);return{termOptions,mapTermLabelsToTermIds,mapTermIdsToTermLabels,validateTokenInput,showControl}},"useTermSelectControl"),TermSelectControl=__name(({taxonomy,value,onChange})=>{const{termOptions,mapTermLabelsToTermIds,mapTermIdsToTermLabels,validateTokenInput,showControl}=useTermSelectControl(taxonomy);return showControl()?jsxRuntimeExports.jsx(components.FormTokenField,{__experimentalExpandOnFocus:!0,__experimentalValidateInput:validateTokenInput,label:i18n.__(`Terms: ${taxonomy.labels.singular_name}`,"municipio"),suggestions:termOptions.map(term=>term.label),value:mapTermIdsToTermLabels(value),onChange:__name(tokens=>{onChange(mapTermLabelsToTermIds(tokens))},"onChange"),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}):null},"TermSelectControl"),usePostsSettingsPanel=__name(selectedPostType=>({taxonomies:data.useSelect(select=>selectedPostType?select(coreData.store).getTaxonomies({type:selectedPostType}):[],[coreData.store,selectedPostType])||[]}),"usePostsSettingsPanel"),PostSettingsPanel=__name(({attributes:{dateFrom,dateTo,postType,postsPerPage,terms,order,orderBy,paginationEnabled},setAttributes})=>{const{taxonomies}=usePostsSettingsPanel(postType),handleTermsChange=__name((taxonomy,selectedTerms)=>{const updatedTerms=terms.filter(term=>term.taxonomy!==taxonomy);selectedTerms.length>0&&updatedTerms.push({taxonomy,terms:selectedTerms}),setAttributes({terms:updatedTerms})},"handleTermsChange");return jsxRuntimeExports.jsxs(components.PanelBody,{title:i18n.__("Posts settings","municipio"),children:[jsxRuntimeExports.jsx(PostTypeSelectControl,{label:i18n.__("Post Type","municipio"),value:postType,__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,onChange:__name(value=>setAttributes({postType:value}),"onChange")}),jsxRuntimeExports.jsx(components.__experimentalNumberControl,{label:paginationEnabled?i18n.__("Posts per page","municipio"):i18n.__("Number of posts","municipio"),max:40,min:1,spinControls:"none",value:postsPerPage||12,__next40pxDefaultSize:!0,onChange:__name(value=>setAttributes({postsPerPage:Number(value)}),"onChange")}),jsxRuntimeExports.jsx(components.ToggleControl,{label:i18n.__("Enable Pagination","municipio"),checked:paginationEnabled,onChange:__name(value=>setAttributes({paginationEnabled:value}),"onChange")}),jsxRuntimeExports.jsx(OrderByControl,{orderBy,postType,onChange:__name(value=>setAttributes({orderBy:value}),"onChange")}),jsxRuntimeExports.jsx(OrderControl,{order,onChange:__name(value=>setAttributes({order:value}),"onChange")}),jsxRuntimeExports.jsx(components.__experimentalInputControl,{type:"date",label:i18n.__("Date From","municipio"),value:dateFrom,onChange:__name(value=>setAttributes({dateFrom:value}),"onChange")}),jsxRuntimeExports.jsx(components.__experimentalInputControl,{type:"date",label:i18n.__("Date To","municipio"),value:dateTo,onChange:__name(value=>setAttributes({dateTo:value}),"onChange")}),taxonomies.map(taxonomy=>jsxRuntimeExports.jsx(TermSelectControl,{taxonomy,value:terms.find(term=>term.taxonomy===taxonomy.slug)?.terms||[],onChange:__name(newValue=>handleTermsChange(taxonomy.slug,newValue),"onChange")},taxonomy.slug))]})},"PostSettingsPanel"),SettingsPanel=__name(props=>jsxRuntimeExports.jsxs(blockEditor.InspectorControls,{children:[jsxRuntimeExports.jsx(PostSettingsPanel,{...props}),jsxRuntimeExports.jsx(AppearanceSettingsPanel,{...props}),jsxRuntimeExports.jsx(FilterSettingsPanel,{...props})]}),"SettingsPanel"),Edit=__name(props=>{const{postType}=props.attributes,{setAttributes}=props,postTypeRef=require$$0.useRef(postType);return require$$0.useEffect(()=>{postTypeRef.current!==postType&&(setAttributes({orderBy:"date",dateSource:"post_date",taxonomiesEnabledForFiltering:[],terms:[]}),postTypeRef.current=postType)},[postType,setAttributes]),jsxRuntimeExports.jsxs(PostsListContextProvider,{gptmk:createGetPostTypeMetaKeys({fetch:apiFetch}),children:[jsxRuntimeExports.jsx(SettingsPanel,{...props}),jsxRuntimeExports.jsx(PostsListServerSideRender,{...props})]})},"Edit");blocks.registerBlockType("municipio/posts-list-block",{edit:Edit})})(wp.blocks,React,wp.apiFetch,wp.blockEditor,wp.element,wp.i18n,wp.components,wp.data,wp.coreData);
//# sourceMappingURL=posts-list-block.BfrcGqIg.js.map
