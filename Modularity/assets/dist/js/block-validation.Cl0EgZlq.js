var __defProp=Object.defineProperty;var __name=(target,value)=>__defProp(target,"name",{value,configurable:!0});const _BlockErrorNotice=class _BlockErrorNotice{fieldGroup;field;noticeElement;regex;errorMessage;notice;constructor(fieldGroup,regex,errorMessage){this.fieldGroup=fieldGroup,this.field=fieldGroup.querySelector("textarea"),this.noticeElement=!1,this.regex=regex,this.errorMessage=errorMessage,this.notice=null,this.field&&this.init()}init(){this.createNotice(),this.checkFieldValue(),this.setupTextareaListener()}createNotice(){const noticeString=`
            <div class="c-notice" style="margin-bottom: 16px; display: none; background-color: #d73740; color: white; padding: 16px 24px; border-radius: 4px;" data-js-block-error-notice>
            <span class="c-notice__icon" margin-right: 16px;>
            <span class="c-icon c-icon--report c-icon--material c-icon--material-report material-icons c-icon--size-md" role="img" aria-label="Icon: Undefined" alt="Icon: Undefined"><span data-nosnippet="" translate="no" aria-hidden="true">report</span></span></span>
            <span id="notice__text__" for="" class="c-notice__message">${this.errorMessage}</span>
            </div>`,div=document.createElement("div");div.innerHTML=noticeString,this.fieldGroup.insertBefore(div,this.fieldGroup.firstChild);const notice=this.fieldGroup.querySelector("[data-js-block-error-notice]");notice&&(this.notice=notice)}checkFieldValue(){this.checkRegex()?(this.fieldGroup.setAttribute("data-js-block-field-validation-error",""),this.notice&&(this.notice.style.display="block")):(this.fieldGroup.removeAttribute("data-js-block-field-validation-error"),this.notice&&(this.notice.style.display="none"))}getFaultyScriptModules(){return document.querySelectorAll("[data-js-block-field-validation-error]").length>0}setupTextareaListener(){this.field&&this.field.addEventListener("input",()=>{this.checkFieldValue()}),this.field&&this.field.addEventListener("change",()=>{this.checkFieldValue()})}checkRegex(){return this.regex.test(this.field?.value||"")}};__name(_BlockErrorNotice,"BlockErrorNotice");let BlockErrorNotice=_BlockErrorNotice;document.addEventListener("DOMContentLoaded",()=>{createValidation('[data-key="field_56a8b9f1902a6"]',"acf/script",/<iframe|<video/,"Please use a more appropriate module for your content. (video or iframe module)")});function createValidation(blockDataKey,blockDataType,regex,errorMessage){if(!regex||!errorMessage)return;[...document.querySelectorAll(blockDataKey)].forEach(fieldGroup=>{new BlockErrorNotice(fieldGroup,regex,errorMessage)});const observer=new MutationObserver(mutationsList=>{mutationsList.forEach(mutation=>{mutation.type==="childList"&&mutation.addedNodes.length>0&&mutation.addedNodes.forEach(addedNode=>{addedNode instanceof HTMLElement&&addedNode.hasAttribute("data-type")&&addedNode.getAttribute("data-type")==blockDataType&&setTimeout(()=>{let fieldGroup=addedNode.querySelector(blockDataKey);fieldGroup&&new BlockErrorNotice(fieldGroup,regex,errorMessage)},2e3)})})}),config={childList:!0,subtree:!0};observer.observe(document,config)}__name(createValidation,"createValidation");
//# sourceMappingURL=block-validation.Cl0EgZlq.js.map
