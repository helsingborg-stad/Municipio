{"version":3,"file":"dynamic-map-acf.Bf9xPk3y.js","sources":["../../../source/js/admin/dynamic-map-acf.js"],"sourcesContent":["export default class DynamicMapAcf {\n\tconstructor() {\n\t\tthis.init();\n\t}\n\n\tinit() {\n\t\tlet startPosition;\n\n\t\tdocument.addEventListener(\"DOMContentLoaded\", () => {\n\t\t\tif (typeof acf == \"undefined\") return;\n\n\t\t\tacf.addAction(\"google_map_init\", (map, marker, field) => {\n\t\t\t\tif (this.startPositionFieldCondition(map, marker, field)) {\n\t\t\t\t\tstartPosition = marker.position;\n\t\t\t\t} else {\n\t\t\t\t\tthis.setMapPosition(startPosition, map, marker);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t$('[data-key=\"field_64c77830c32aa\"] .acf-input').change((e) => {\n\t\t\t\tconst input = document.querySelector(\n\t\t\t\t\t'[name=\"acf[field_64c77830c32aa]\"',\n\t\t\t\t);\n\t\t\t\tif (input) {\n\t\t\t\t\tlet json;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tjson = JSON.parse(input.value);\n\t\t\t\t\t\tstartPosition = { lat: json.lat, lng: json.lng };\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\treturn console.error(\"Couldn't parse JSON\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tstartPositionFieldCondition(map, marker, field) {\n\t\treturn (\n\t\t\tfield.data.key === \"field_64c77830c32aa\" &&\n\t\t\tmarker &&\n\t\t\tmarker.position &&\n\t\t\tmap\n\t\t);\n\t}\n\n\tsetMapPosition(startPosition, map, marker) {\n\t\tif (!map || marker.position) return;\n\n\t\tif (startPosition) {\n\t\t\tmap.setCenter(startPosition);\n\t\t}\n\t}\n}\n\nnew DynamicMapAcf();\n"],"names":[],"mappings":"gHAAe,MAAM,eAAN,MAAM,cAAc,CAClC,aAAc,CACb,KAAK,KAAI,CACV,CAEA,MAAO,CACN,IAAI,cAEJ,SAAS,iBAAiB,mBAAoB,IAAM,CAC/C,OAAO,IAAO,MAElB,IAAI,UAAU,kBAAmB,CAAC,IAAK,OAAQ,QAAU,CACpD,KAAK,4BAA4B,IAAK,OAAQ,KAAK,EACtD,cAAgB,OAAO,SAEvB,KAAK,eAAe,cAAe,IAAK,MAAM,CAEhD,CAAC,EAED,EAAE,6CAA6C,EAAE,OAAQ,GAAM,CAC9D,MAAM,MAAQ,SAAS,cACtB,kCACL,EACI,GAAI,MAAO,CACV,IAAI,KACJ,GAAI,CACH,KAAO,KAAK,MAAM,MAAM,KAAK,EAC7B,cAAgB,CAAE,IAAK,KAAK,IAAK,IAAK,KAAK,GAAG,CAC/C,MAAY,CACX,OAAO,QAAQ,MAAM,qBAAqB,CAC3C,CACD,CACD,CAAC,EACF,CAAC,CACF,CAEA,4BAA4B,IAAK,OAAQ,MAAO,CAC/C,OACC,MAAM,KAAK,MAAQ,uBACnB,QACA,OAAO,UACP,GAEF,CAEA,eAAe,cAAe,IAAK,OAAQ,CACtC,CAAC,KAAO,OAAO,UAEf,eACH,IAAI,UAAU,aAAa,CAE7B,CACD,EApDmC,uCAApB,IAAM,cAAN,eAsDf,IAAI"}