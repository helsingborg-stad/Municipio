{"version":3,"file":"modularity.BVzxW45J.js","sources":["../../../source/js/editor/autosave.js","../../../source/js/editor/dragAndDrop.js","../../../source/js/editor/module.js","../../../source/js/editor/thickbox.js","../../../source/js/editor/validate.js","../../../source/js/helpers/helpers.js","../../../source/js/helpers/Module.js","../../../source/js/helpers/ModuleRefresher.js","../../../source/js/helpers/ModulesRestAPI.js","../../../source/js/helpers/widget.js","../../../source/js/prompt/modal.ts","../../../source/js/modularity.js"],"sourcesContent":["let lModularity = null;\n$ = jQuery;\n\nexport default function Autosave(Modularity) {\n\tlModularity = Modularity;\n\t$(\n\t\tfunction () {\n\t\t\t//this.handleEvents();\n\t\t}.bind(this),\n\t);\n}\n\nAutosave.prototype.save = function (selector) {\n\t$(\"#modularity-options #publishing-action .spinner\").css(\n\t\t\"visibility\",\n\t\t\"visible\",\n\t);\n\tvar request = $(selector).serializeObject();\n\trequest.id = modularity_post_id;\n\trequest.action = \"save_modules\";\n\n\t$.post(ajaxurl, request, function (response) {\n\t\t$(\"#modularity-options #publishing-action .spinner\").css(\n\t\t\t\"visibility\",\n\t\t\t\"hidden\",\n\t\t);\n\t});\n};\n\njQuery.fn.serializeObject = function () {\n\tvar o = {};\n\tvar a = this.serializeArray();\n\tjQuery.each(a, function () {\n\t\tif (o[this.name] !== undefined) {\n\t\t\tif (!o[this.name].push) {\n\t\t\t\to[this.name] = [o[this.name]];\n\t\t\t}\n\t\t\to[this.name].push(this.value || \"\");\n\t\t} else {\n\t\t\to[this.name] = this.value || \"\";\n\t\t}\n\t});\n\treturn o;\n};\n","var sortableIn;\nlet lModularity = null;\n$ = jQuery;\n\nexport default function DragAndDrop(Modularity) {\n\tlModularity = Modularity;\n\n\t$(\n\t\tfunction () {\n\t\t\tif (\n\t\t\t\ttypeof pagenow !== \"undefined\" &&\n\t\t\t\tpagenow == \"admin_page_modularity-editor\"\n\t\t\t) {\n\t\t\t\tthis.init();\n\t\t\t}\n\t\t}.bind(this),\n\t);\n}\n\n/**\n * Initialize\n * @return {void}\n */\nDragAndDrop.prototype.init = function () {\n\tthis.setupDraggable();\n\tthis.setupDroppable();\n\tthis.setupSortable();\n};\n\nDragAndDrop.prototype.setupSortable = function () {\n\t$(\".modularity-js-sortable\")\n\t\t.sortable({\n\t\t\thandle: \".modularity-sortable-handle\",\n\t\t\tconnectWith: \".modularity-js-sortable\",\n\t\t\tplaceholder: \"ui-sortable-placeholder\",\n\t\t\tstart: function (e, ui) {\n\t\t\t\ttry {\n\t\t\t\t\tvar validTargetAreas = jQuery(ui.item).attr(\n\t\t\t\t\t\t\"data-sidebar-incompability\",\n\t\t\t\t\t);\n\t\t\t\t\tvalidTargetAreas = JSON.parse(validTargetAreas);\n\t\t\t\t\tif (validTargetAreas && typeof validTargetAreas === \"object\") {\n\t\t\t\t\t\tjQuery(\".modularity-sidebar-area\").each(function (index, sidebar) {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t!validTargetAreas.includes(jQuery(this).attr(\"data-area-id\"))\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tjQuery(this)\n\t\t\t\t\t\t\t\t\t.parent()\n\t\t\t\t\t\t\t\t\t.parent()\n\t\t\t\t\t\t\t\t\t.removeClass(\"modularity-incompatible-area\");\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tjQuery(this)\n\t\t\t\t\t\t\t\t\t.parent()\n\t\t\t\t\t\t\t\t\t.parent()\n\t\t\t\t\t\t\t\t\t.addClass(\"modularity-incompatible-area\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.log(\"Incompability information not defined - \" + error);\n\t\t\t\t}\n\t\t\t},\n\t\t\tstop: function (e, ui) {\n\t\t\t\tvar sidebarId = ui.item.parents(\"ul\").data(\"area-id\");\n\t\t\t\tui.item\n\t\t\t\t\t.find('input[name^=\"modularity_modules\"]')\n\t\t\t\t\t.each(function (index, element) {\n\t\t\t\t\t\tvar newName = $(this)\n\t\t\t\t\t\t\t.attr(\"name\")\n\t\t\t\t\t\t\t.replace(/\\[(.*?)\\]/i, \"[\" + sidebarId + \"]\");\n\t\t\t\t\t\t$(this).attr(\"name\", newName);\n\t\t\t\t\t});\n\t\t\t\tjQuery(\"[id^=modularity-mb-]\").removeClass(\n\t\t\t\t\t\"modularity-incompatible-area\",\n\t\t\t\t);\n\t\t\t},\n\t\t})\n\t\t.bind(this);\n};\n\n/**\n * Setup draggable functionallity\n * @return {void}\n */\nDragAndDrop.prototype.setupDraggable = function () {\n\t$(\".modularity-js-draggable\").draggable({\n\t\tappendTo: \"body\",\n\t\tcontainment: \"document\",\n\t\tscroll: false,\n\t\thelper: \"clone\",\n\t\trevert: \"invalid\",\n\t\trevertDuration: 200,\n\t\tstart: function (event, ui) {\n\t\t\ttry {\n\t\t\t\tvar validTargetAreas = jQuery(this).attr(\"data-sidebar-incompability\");\n\t\t\t\tvalidTargetAreas = JSON.parse(validTargetAreas);\n\n\t\t\t\tif (validTargetAreas && typeof validTargetAreas === \"object\") {\n\t\t\t\t\tjQuery(\".modularity-sidebar-area\").each(function (index, sidebar) {\n\t\t\t\t\t\tif (!validTargetAreas.includes(jQuery(this).attr(\"data-area-id\"))) {\n\t\t\t\t\t\t\tjQuery(this)\n\t\t\t\t\t\t\t\t.parent()\n\t\t\t\t\t\t\t\t.parent()\n\t\t\t\t\t\t\t\t.removeClass(\"modularity-incompatible-area\");\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tjQuery(this)\n\t\t\t\t\t\t\t\t.parent()\n\t\t\t\t\t\t\t\t.parent()\n\t\t\t\t\t\t\t\t.addClass(\"modularity-incompatible-area\");\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.log(\"Incompability information not defined - \" + error);\n\t\t\t}\n\t\t},\n\t\tstop: function (event, ui) {\n\t\t\tjQuery(\"[id^=modularity-mb-]\").removeClass(\n\t\t\t\t\"modularity-incompatible-area\",\n\t\t\t);\n\t\t},\n\t});\n};\n\n/**\n * Setup droppable functionallity\n * @return {void}\n */\nDragAndDrop.prototype.setupDroppable = function () {\n\t$(\".modularity-js-droppable\")\n\t\t.droppable({\n\t\t\taccept: \".modularity-js-draggable\",\n\t\t\thoverClass: \"modularity-state-droppable\",\n\t\t\tdrop: function (e, ui) {\n\t\t\t\tthis.appendModule(e, ui);\n\t\t\t}.bind(this),\n\t\t})\n\t\t.bind(this);\n};\n\n/**\n * Appends a module to the target when dropped\n * @param  {object} e  Event\n * @param  {object} ui UI\n * @return {void}\n */\nDragAndDrop.prototype.appendModule = function (e, ui) {\n\tvar module = ui.draggable;\n\tvar moduleName = module.find(\".modularity-module-name\").text();\n\tvar moduleId = module.data(\"module-id\");\n\tvar incompability = module.attr(\"data-sidebar-incompability\");\n\n\tlModularity.Editor.Module.addModule(\n\t\te.target,\n\t\tmoduleId,\n\t\tmoduleName,\n\t\tundefined,\n\t\tundefined,\n\t\tundefined,\n\t\tundefined,\n\t\tundefined,\n\t\tincompability,\n\t);\n};\n","let lModularity = null;\n$ = jQuery;\nvar initCompleted = false;\nlet hasChangedContent = [];\n\n/**\n * Object to create Thickbox querystring from\n * @type {Object}\n */\nvar thickboxOptions = {\n\tis_thickbox: true,\n};\n\nvar editingModule = false;\n\nexport default function Module(Modularity) {\n\tlModularity = Modularity;\n\n\t$(\n\t\tfunction () {\n\t\t\tif (\n\t\t\t\ttypeof pagenow !== \"undefined\" &&\n\t\t\t\tpagenow == \"admin_page_modularity-editor\"\n\t\t\t) {\n\t\t\t\tthis.handleEvents();\n\t\t\t\tthis.loadModules(modularity_post_id);\n\t\t\t}\n\t\t}.bind(this),\n\t);\n}\n\n/**\n * Loads saved modules and adds them to the page\n * @param  {integer} postId The post id to load modules from\n * @return {void}\n */\nModule.prototype.loadModules = function (postId) {\n\tvar pageLoadField = $('[name=\"modularity-option-page-loading\"]');\n\tvar form = pageLoadField.closest(\"form\");\n\tvar submitButton = form.find('[type=\"submit\"]');\n\tsubmitButton.prop(\"disabled\", true);\n\n\tvar request = {\n\t\taction: \"get_post_modules\",\n\t\tid: postId,\n\t};\n\n\t$.post(\n\t\tajaxurl,\n\t\trequest,\n\t\tfunction (response) {\n\t\t\t$.each(\n\t\t\t\tresponse,\n\t\t\t\tfunction (sidebar, modules) {\n\t\t\t\t\tvar sidebarElement = $(\n\t\t\t\t\t\t'.modularity-sidebar-area[data-area-id=\"' + sidebar + '\"]',\n\t\t\t\t\t);\n\n\t\t\t\t\t$.each(\n\t\t\t\t\t\tmodules.modules,\n\t\t\t\t\t\tfunction (key, data) {\n\t\t\t\t\t\t\tif (data.hidden == \"true\") {\n\t\t\t\t\t\t\t\tdata.hidden = true;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tvar incompability =\n\t\t\t\t\t\t\t\ttypeof data.sidebar_incompability != \"undefined\" &&\n\t\t\t\t\t\t\t\t!$.isEmptyObject(data.sidebar_incompability)\n\t\t\t\t\t\t\t\t\t? JSON.stringify(data.sidebar_incompability)\n\t\t\t\t\t\t\t\t\t: \"\";\n\t\t\t\t\t\t\tthis.addModule(\n\t\t\t\t\t\t\t\tsidebarElement,\n\t\t\t\t\t\t\t\tdata.post_type,\n\t\t\t\t\t\t\t\tdata.post_type_name,\n\t\t\t\t\t\t\t\tdata.post_title,\n\t\t\t\t\t\t\t\tdata.ID,\n\t\t\t\t\t\t\t\tdata.hidden,\n\t\t\t\t\t\t\t\tdata.columnWidth,\n\t\t\t\t\t\t\t\tdata.isDeprecated,\n\t\t\t\t\t\t\t\tincompability,\n\t\t\t\t\t\t\t\tdata.usage ?? null,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}.bind(this),\n\t\t\t\t\t);\n\n\t\t\t\t\tsidebarElement.removeClass(\"modularity-spinner\");\n\t\t\t\t}.bind(this),\n\t\t\t);\n\n\t\t\tinitCompleted = true;\n\t\t\tpageLoadField.remove();\n\t\t\tsubmitButton.removeAttr(\"disabled\");\n\t\t\t$(\".modularity-sidebar-area\").removeClass(\"modularity-spinner\");\n\t\t}.bind(this),\n\t\t\"json\",\n\t);\n};\n\n/**\n * Check editing module\n * @return {boolean/string}\n */\nModule.prototype.isEditingModule = () => editingModule;\n\n/**\n * Generates a thickbox url to open a thickbox in correct mode\n * @param  {string} action Should be \"add\" or \"edit\"\n * @param  {object} data   Should contain additional data (for now supports \"postId\" and \"postType\")\n * @return {string}        Thickbox url\n */\nModule.prototype.getThickBoxUrl = (action, data) => {\n\tvar base = \"\";\n\tvar querystring = {};\n\n\tswitch (action) {\n\t\tcase \"add\":\n\t\t\tbase = \"post-new.php\";\n\t\t\tbreak;\n\n\t\tcase \"edit\":\n\t\t\tbase = \"post.php\";\n\t\t\tbreak;\n\t}\n\n\tif (typeof data.postId == \"number\") {\n\t\tquerystring.post = data.postId;\n\t\tquerystring.action = \"edit\";\n\t}\n\n\tif (typeof data.postType == \"string\") {\n\t\tquerystring.post_type = data.postType;\n\t}\n\n\treturn (\n\t\tadmin_url +\n\t\tbase +\n\t\t\"?\" +\n\t\t$.param(querystring) +\n\t\t\"&\" +\n\t\t$.param(thickboxOptions)\n\t);\n};\n\nModule.prototype.getImportUrl = (data) => {\n\tvar base = \"edit.php\";\n\tvar querystring = {};\n\n\tquerystring.post_type = data.postType;\n\n\treturn (\n\t\tadmin_url +\n\t\tbase +\n\t\t\"?\" +\n\t\t$.param(querystring) +\n\t\t\"&\" +\n\t\t$.param(thickboxOptions)\n\t);\n};\n\n/**\n * Adds a module \"row\" to the target placeholder\n * @param {selector} target   The target selector\n * @param {string} moduleId   The module id slug\n * @param {string} moduleName The module name\n */\nModule.prototype.addModule = function (\n\ttarget,\n\tmoduleId,\n\tmoduleName,\n\tmoduleTitle,\n\tpostId,\n\thidden,\n\tcolumnWidth,\n\tisDeprecated,\n\tincompability,\n\tusage,\n) {\n\tmoduleTitle = typeof moduleTitle != \"undefined\" ? \": \" + moduleTitle : \"\";\n\tpostId = typeof postId != \"undefined\" ? postId : \"\";\n\tcolumnWidth = typeof columnWidth != \"undefined\" ? columnWidth : \"\";\n\tvar deprecated =\n\t\tisDeprecated === true\n\t\t\t? '<span class=\"modularity-deprecated\" style=\"color:#ff0000;\">(' +\n\t\t\t\tmodularityLang.deprecated +\n\t\t\t\t\")</span>\"\n\t\t\t: \"\";\n\tincompability = typeof incompability != \"undefined\" ? incompability : \"\";\n\n\t// Get thickbox url\n\tvar thickboxUrl = this.getThickBoxUrl(\"add\", {\n\t\tpostType: moduleId,\n\t});\n\n\t// Set thickbox action\n\tlModularity.Editor.Thickbox.postAction = \"add\";\n\n\tif (postId) {\n\t\tthickboxUrl = this.getThickBoxUrl(\"edit\", {\n\t\t\tpostId: postId,\n\t\t});\n\n\t\tlModularity.Editor.Thickbox.postAction = \"edit\";\n\t}\n\n\t// Get import url\n\tvar importUrl = this.getImportUrl({\n\t\tpostType: moduleId,\n\t});\n\n\t// Check/uncheck hidden checkbox\n\tvar isHidden = \"\";\n\tif (hidden === true) {\n\t\tisHidden = \"checked\";\n\t}\n\n\tvar sidebarId = $(target).data(\"area-id\");\n\tvar itemRowId = Math.random().toString(36).substr(2, 9); // ToDO: Fix uuid helper lModularity.Helpers.uuid();\n\n\tif (typeof usage === \"number\" && usage > 1) {\n\t\tmoduleTitle += ` <em>(${usage})</em>`;\n\t}\n\n\tvar html =\n\t\t'<li id=\"post-' +\n\t\tpostId +\n\t\t'\" data-module-id=\"' +\n\t\tmoduleId +\n\t\t'\" data-module-stored-width=\"' +\n\t\tcolumnWidth +\n\t\t\"\\\" data-sidebar-incompability='\" +\n\t\tincompability +\n\t\t'\\'>\\\n            <span class=\"modularity-line-wrapper\">\\\n                <span class=\"modularity-sortable-handle\">\\\n                    <i style=\"top:4px;\" class=\"modularity-module-actions-symbol material-symbols material-symbols-rounded material-symbols-sharp material-symbols-outlined\">drag_handle</i>\\\n                </span>\\\n                <span class=\"modularity-module-name\">\\\n                    <strong>' +\n\t\tmoduleName +\n\t\t\"</strong>\\\n                    \" +\n\t\tdeprecated +\n\t\t'\\\n                    <span class=\"modularity-module-title\">' +\n\t\tmoduleTitle +\n\t\t'</span>\\\n                </span>\\\n                <span class=\"modularity-module-actions\">\\\n                    <label class=\"modularity-module-columns\">\\\n                        <i style=\"top:4px;\" class=\"modularity-cmd-visibility-on modularity-module-actions-symbol material-symbols material-symbols-rounded material-symbols-sharp material-symbols-outlined\">width</i>\\\n                        <select name=\"modularity_modules[' +\n\t\tsidebarId +\n\t\t\"][\" +\n\t\titemRowId +\n\t\t'][columnWidth]\">\\\n                            ' +\n\t\tmodularityLang.widthOptions +\n\t\t'\\\n                        </select>\\\n                        <span class=\"label\">' +\n\t\tmodularityLang.width +\n\t\t'</span>\\\n                    </label>\\\n                    <label class=\"modularity-module-hide\">\\\n                        <input type=\"checkbox\" name=\"modularity_modules[' +\n\t\tsidebarId +\n\t\t\"][\" +\n\t\titemRowId +\n\t\t'][hidden]\" value=\"hidden\" ' +\n\t\tisHidden +\n\t\t' aria-label=\"' +\n\t\tmodularityLang.langhide +\n\t\t'\"/>\\\n                        <i style=\"top:4px;\" class=\"modularity-cmd-visibility-on modularity-module-actions-symbol material-symbols material-symbols-rounded material-symbols-sharp material-symbols-outlined\">visibility</i>\\\n                        <i style=\"top:4px;\" class=\"modularity-cmd-visibility-off modularity-module-actions-symbol material-symbols material-symbols-rounded material-symbols-sharp material-symbols-outlined\">visibility_off</i>\\\n                        <span class=\"label\">' +\n\t\tmodularityLang.langvisibility +\n\t\t'</span>\\\n                    </label>\\\n                    <a href=\"' +\n\t\tthickboxUrl +\n\t\t'\" data-modularity-modal class=\"modularity-js-thickbox-open modularity-err-resolver\">' +\n\t\t'<i style=\"top:3px;\" class=\"modularity-module-actions-symbol material-symbols material-symbols-rounded material-symbols-sharp material-symbols-outlined\">edit</i>' +\n\t\t'<span class=\"label\">' +\n\t\tmodularityLang.langedit +\n\t\t\"</span>\" +\n\t\t'</a>\\\n                    <a href=\"' +\n\t\timportUrl +\n\t\t'\" class=\"modularity-js-thickbox-import modularity-err-resolver\">' +\n\t\t'<i style=\"top:4px;\" class=\"modularity-module-actions-symbol material-symbols material-symbols-rounded material-symbols-sharp material-symbols-outlined\">dataset_linked</i>' +\n\t\t'<span class=\"label\">' +\n\t\tmodularityLang.langimport +\n\t\t\"</span>\" +\n\t\t'</a>\\\n                    <a href=\"#remove\" class=\"modularity-module-remove modularity-err-resolver\">' +\n\t\t'<i style=\"top:4px;\" class=\"modularity-module-actions-symbol material-symbols material-symbols-rounded material-symbols-sharp material-symbols-outlined\">delete</i>' +\n\t\t'<span class=\"label\">' +\n\t\tmodularityLang.langremove +\n\t\t\"</span>\" +\n\t\t'</a>\\\n                </span>\\\n                <input type=\"hidden\" name=\"modularity_modules[' +\n\t\tsidebarId +\n\t\t\"][\" +\n\t\titemRowId +\n\t\t'][postid]\" class=\"modularity-js-module-id\" value=\"' +\n\t\tpostId +\n\t\t'\" required>\\\n                <input type=\"hidden\" name=\"modularity_modules[' +\n\t\tsidebarId +\n\t\t\"][\" +\n\t\titemRowId +\n\t\t'][name]\" value=\"' +\n\t\tmoduleId +\n\t\t'\" />\\\n            </span>\\\n        </li>';\n\n\t//Store\n\t$(target).append(html);\n\n\tthis.getAllCurrentModules();\n\n\t//Update width selector\n\t$(\".modularity-sidebar-area > li\").each((index, item) => {\n\t\t$(\".modularity-module-columns select\", $(item)).val(\n\t\t\t$(item).attr(\"data-module-stored-width\"),\n\t\t);\n\t});\n\n\t//Refresh\n\t$(\".modularity-js-sortable\").sortable(\"refresh\");\n};\n\nModule.prototype.getAllCurrentModules = () => {\n\tconst sliderAreas = document.querySelectorAll(\".modularity-sidebar-area\");\n\tconst sliderAreasItemsArray = [];\n\tsliderAreas.forEach((area) => {\n\t\tarea.querySelectorAll(\"li\").forEach((item) => {\n\t\t\tif (item.hasAttribute(\"id\")) {\n\t\t\t\tsliderAreasItemsArray.push(item.getAttribute(\"id\"));\n\t\t\t}\n\t\t});\n\t});\n\thasChangedContent = sliderAreasItemsArray;\n};\n\n/**\n * Updates a module \"row\" after editing the module post\n * @param  {DOM} module    Module dom element\n * @param  {object} data   The data\n * @return {void}\n */\nModule.prototype.updateModule = function (module, data) {\n\t// Href\n\tmodule.find(\"a.modularity-js-thickbox-open\").attr(\n\t\t\"href\",\n\t\tthis.getThickBoxUrl(\"edit\", {\n\t\t\tpostId: data.post_id,\n\t\t}),\n\t);\n\n\t// Post id input\n\tmodule.find(\"input.modularity-js-module-id\").val(data.post_id).change();\n\n\t// Post title\n\tmodule.find(\".modularity-module-title\").text(\": \" + data.title);\n};\n\n/**\n * Removes a module \"row\" from the placeholder\n * @param  {DOM Element} module The (to be removed) module's dom element\n * @return {void}\n */\nModule.prototype.removeModule = (module) => {\n\tif (confirm(modularityLang.actionRemove)) {\n\t\tmodule.remove();\n\t}\n};\n\n/**\n * Compare two arrays\n * @return array\n */\nModule.prototype.arraysAreEqual = (a = [], b = []) => {\n\tif (a.length !== b.length) {\n\t\treturn false;\n\t}\n\n\tfor (let i = 0; i < a.length; i++) {\n\t\tif (a[i] !== b[i]) {\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn true;\n};\n\n/**\n * Handle events\n * @return {void}\n */\nModule.prototype.handleEvents = function () {\n\tlet saveButtonClicked = false;\n\tconst saveButton = document.getElementById(\"publish\");\n\n\tif (saveButton) {\n\t\tsaveButton.addEventListener(\"click\", () => {\n\t\t\tsaveButtonClicked = true;\n\t\t});\n\t}\n\n\twindow.addEventListener(\"beforeunload\", (e) => {\n\t\tconst modules = document.querySelectorAll(\".modularity-sidebar-area > li\");\n\t\tconst arr = [];\n\t\tmodules.forEach((element) => {\n\t\t\tif (element.hasAttribute(\"id\")) {\n\t\t\t\tarr.push(element.getAttribute(\"id\"));\n\t\t\t}\n\t\t});\n\n\t\tif (!saveButtonClicked && !this.arraysAreEqual(arr, hasChangedContent)) {\n\t\t\te.returnValue = \"\";\n\t\t}\n\t});\n\n\t// Trash icon\n\t$(document).on(\n\t\t\"click\",\n\t\t\".modularity-module-remove\",\n\t\tfunction (e) {\n\t\t\te.preventDefault();\n\t\t\tvar target = $(e.target).closest(\"li\");\n\t\t\tthis.removeModule(target);\n\t\t}.bind(this),\n\t);\n\n\t//Import\n\t$(document).on(\"click\", \".modularity-js-thickbox-import\", (e) => {\n\t\te.preventDefault();\n\n\t\tvar el = $(e.target).closest(\"a\");\n\t\teditingModule = $(e.target).closest(\"li\");\n\n\t\tlModularity.Editor.Thickbox.postAction = \"import\";\n\t\tlModularity.Prompt.Modal.open($(e.target).closest(\"a\").attr(\"href\"));\n\t});\n\n\t// Edit\n\t$(document).on(\n\t\t\"click\",\n\t\t\".modularity-js-thickbox-open\",\n\t\t((e) => {\n\t\t\te.preventDefault();\n\n\t\t\tvar el = $(e.target).closest(\"a\");\n\t\t\tif (el.attr(\"href\").indexOf(\"post.php\") > -1) {\n\t\t\t\tlModularity.Editor.Thickbox.postAction = \"edit\";\n\t\t\t}\n\n\t\t\teditingModule = $(e.target).closest(\"li\");\n\n\t\t\tlModularity.Prompt.Modal.open($(e.target).closest(\"a\").attr(\"href\"));\n\t\t}).bind(this),\n\t);\n};\n","/**\n * Attention: This variable should not be set manually\n *\n * Indicates if we are adding a new post or editing old one\n * @type {String}\n */\nvar postAction = \"add\";\nlet lModularity = null;\n$ = jQuery;\n\nexport default function Thickbox(Modularity) {\n\tlModularity = Modularity;\n}\n\nThickbox.prototype.modulePostCreated = function (postId) {\n\tlModularity.Prompt.Modal.close();\n\n\tvar module = parent.Modularity.Editor.Module.isEditingModule();\n\n\tvar request = {\n\t\taction: \"get_post\",\n\t\tid: postId,\n\t};\n\n\t$.post(\n\t\tajaxurl,\n\t\trequest,\n\t\tfunction (response) {\n\t\t\tvar data = {\n\t\t\t\tpost_id: response.ID,\n\t\t\t\ttitle: response.post_title,\n\t\t\t};\n\n\t\t\tlModularity.Editor.Module.updateModule(module, data);\n\t\t\tlModularity.Editor.Autosave.save(\"form\");\n\t\t},\n\t\t\"json\",\n\t);\n};\n","let lModularity = null;\n$ = jQuery;\nvar hasErrors = false;\nvar errorClass = \"validation-error\";\n\nexport default function Validate(Modularity) {\n\tlModularity = Modularity;\n\n\tthis.handleEvents();\n}\n\n/**\n * Run validation methods\n * @return {void}\n */\nValidate.prototype.run = function () {\n\thasErrors = false;\n\tthis.checkRequired();\n};\n\n/**\n * Check required fileds is not empty\n * @return void\n */\nValidate.prototype.checkRequired = function () {\n\tvar required = $(\"[required]\");\n\trequired.removeClass(errorClass);\n\n\trequired.each(\n\t\tfunction (index, element) {\n\t\t\tif ($(element).val().length === 0) {\n\t\t\t\t$(element).parents(\"li\").addClass(errorClass);\n\n\t\t\t\t$(element).one(\"change\", function (e) {\n\t\t\t\t\t$(e.target).parents(\"li\").removeClass(errorClass);\n\t\t\t\t});\n\n\t\t\t\thasErrors = true;\n\t\t\t}\n\t\t}.bind(this),\n\t);\n};\n\n/**\n * Handle events\n * @return void\n */\nValidate.prototype.handleEvents = function () {\n\t$(document).on(\n\t\t\"click\",\n\t\t\"#modularity-mb-editor-publish #publish\",\n\t\tfunction (e) {\n\t\t\tthis.run();\n\n\t\t\tif (hasErrors) {\n\t\t\t\t$(\"#modularity-mb-editor-publish .spinner\").css(\"visibility\", \"hidden\");\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn true;\n\t\t}.bind(this),\n\t);\n};\n","let lModularity = null;\n$ = jQuery;\n\nexport default function Helpers(Modularity) {\n\tlModularity = Modularity;\n\t$(function () {}.bind(this));\n}\n\nHelpers.prototype.uuid = function (separator) {\n\treturn Math.random().toString(36).substr(2, 9);\n};\n","/**\n * Module class\n * Represents a module on the page.\n *\n * @property {string} id\n * @property {HTMLElement} element\n * @property {ModulesRestAPI} restAPI\n */\nexport class Module {\n\tstatic selector = \"[data-module-refresh-interval]\";\n\n\tconstructor(id, element, restAPI) {\n\t\tthis.id = id;\n\t\tthis.element = element;\n\t\tthis.restAPI = restAPI;\n\t\tthis.setupEventListeners();\n\t}\n\n\tsetupEventListeners() {\n\t\tif (!this.element) {\n\t\t\tthrow new Error(\"Element is not set.\");\n\t\t}\n\n\t\tthis.element.addEventListener(\"refresh\", this.handleRefresh.bind(this));\n\n\t\tthis.element.addEventListener(\"DOMNodeRemoved\", () => {\n\t\t\tthis.element.removeEventListener(\"refresh\", this.handleRefresh);\n\t\t});\n\t}\n\n\trefresh(interval = null) {\n\t\tconst refreshEvent = new CustomEvent(\"refresh\");\n\t\tthis.element.dispatchEvent(refreshEvent);\n\n\t\tif (interval) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.refresh(interval);\n\t\t\t}, interval);\n\t\t}\n\t}\n\n\tasync handleRefresh() {\n\t\tconst freshModule = await this.restAPI.getModule(this.id);\n\t\tthis.replace(freshModule);\n\t}\n\n\treplace(freshModule) {\n\t\tthis.element.parentNode.replaceChild(freshModule, this.element);\n\t\tthis.element = freshModule;\n\t\tthis.setupEventListeners();\n\t}\n\n\tgetRefreshInterval() {\n\t\tconst intervalAttributeValue = this.element.getAttribute(\n\t\t\t\"data-module-refresh-interval\",\n\t\t);\n\t\tif (!intervalAttributeValue || isNaN(intervalAttributeValue)) return null;\n\t\treturn parseInt(intervalAttributeValue) * 1000;\n\t}\n}\n","import { Module } from \"./Module.js\";\n\n/**\n * Ensure that the wpApiSettings object is present on the window object.\n *\n * @throws {Error} If wpApiSettings or wpApiSettings.root is not present on the window object.\n */\nexport function ensureWPApiSettings() {\n\tconst { wpApiSettings } = window;\n\tif (!wpApiSettings?.root) {\n\t\tthrow new Error(\n\t\t\t\"wpApiSettings or wpApiSettings.root is not present on the window object.\",\n\t\t);\n\t}\n}\n\nexport class ModuleRefresher {\n\t/**\n\t *\n\t * @param ModulesRestAPI restAPI\n\t */\n\tconstructor(restAPI) {\n\t\tthis.restAPI = restAPI;\n\t}\n\n\trefreshModules() {\n\t\tconst moduleElements = document.querySelectorAll(Module.selector);\n\t\tconst modules = Array.from(moduleElements).map(\n\t\t\t(element) =>\n\t\t\t\tnew Module(\n\t\t\t\t\telement.getAttribute(\"data-module-id\"),\n\t\t\t\t\telement,\n\t\t\t\t\tthis.restAPI,\n\t\t\t\t),\n\t\t);\n\n\t\tfor (const module of modules) {\n\t\t\tconst refreshInterval = module.getRefreshInterval();\n\t\t\tmodule.refresh(refreshInterval);\n\t\t}\n\t}\n}\n","export const ModulesRestAPIEndpoints = (basePath) => ({\n\tgetModule: `${basePath}modularity/v1/modules`,\n});\n\nexport class ModulesRestAPI {\n\tfetcher = {};\n\tendpoints = {};\n\tnonce = \"\";\n\tcacheBustKey = 0;\n\n\tconstructor(fetcher, endpoints, nonce) {\n\t\tthis.fetcher = fetcher;\n\t\tthis.endpoints = endpoints;\n\t\tthis.nonce = nonce;\n\t\tthis.cacheBustKey = Math.floor(Date.now() / 15000);\n\t}\n\n\tasync getModule(moduleID) {\n\t\tconst url = `${this.endpoints.getModule}/${moduleID}?cacheBust=${this.cacheBustKey}`;\n\t\tconst response = await this.fetcher(url);\n\n\t\tif (!response.ok) {\n\t\t\tthrow new Error(`Could not load module from URL: ${url}`);\n\t\t}\n\n\t\tconst htmlString = await response.json();\n\t\tconst template = document.createElement(\"template\");\n\t\ttemplate.innerHTML = htmlString;\n\n\t\treturn template.content.firstChild;\n\t}\n}\n","var editingWidget = false;\nlet lModularity = null;\n$ = jQuery;\n\nexport default function Widget(Modularity) {\n\t$(\n\t\tfunction () {\n\t\t\tlModularity = Modularity;\n\t\t\t/* Import */\n\t\t\t$(document).on(\n\t\t\t\t\"click\",\n\t\t\t\t\".modularity-js-thickbox-widget-import-widget\",\n\t\t\t\tfunction (e) {\n\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\teditingWidget = $(e.target).parents(\".widget-inside\");\n\n\t\t\t\t\tvar importUrl = Modularity.Editor.Module.getImportUrl({\n\t\t\t\t\t\tpostType: $(e.target)\n\t\t\t\t\t\t\t.parents(\".widget-inside\")\n\t\t\t\t\t\t\t.find(\".modularity-widget-module-type select\")\n\t\t\t\t\t\t\t.val(),\n\t\t\t\t\t});\n\n\t\t\t\t\tModularity.Editor.Module.editingModule = $(e.target).closest(\n\t\t\t\t\t\t\".widget-inside\",\n\t\t\t\t\t);\n\n\t\t\t\t\tModularity.Editor.Thickbox.postAction = \"import-widget\";\n\t\t\t\t\tModularity.Prompt.Modal.open(importUrl);\n\t\t\t\t},\n\t\t\t);\n\n\t\t\t/* Edit */\n\t\t\t$(document).on(\n\t\t\t\t\"click\",\n\t\t\t\t\".modularity-js-thickbox-open-widget\",\n\t\t\t\tfunction (e) {\n\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\tvar el = $(e.target).closest(\"a\");\n\t\t\t\t\tif (el.attr(\"href\").indexOf(\"post.php\") > -1) {\n\t\t\t\t\t\tModularity.Editor.Thickbox.postAction = \"edit\";\n\t\t\t\t\t}\n\n\t\t\t\t\teditingModule = $(e.target).closest(\"li\");\n\n\t\t\t\t\tModularity.Prompt.Modal.open($(e.target).closest(\"a\").attr(\"href\"));\n\t\t\t\t}.bind(this),\n\t\t\t);\n\t\t}.bind(this),\n\t);\n}\n\nWidget.prototype.isEditingWidget = function () {\n\treturn editingWidget;\n};\n\nWidget.prototype.updateWidget = function (widget, data) {\n\t$(widget).find(\".modularity-widget-module-id-span\").html(data.post_id);\n\t$(widget).find(\".modularity-widget-module-id\").val(data.post_id);\n\t$(widget)\n\t\t.find(\".modularity-widget-module-edit\")\n\t\t.attr(\n\t\t\t\"href\",\n\t\t\t\"post.php?post=\" + data.post_id + \"&action=edit&is_thickbox=true\",\n\t\t)\n\t\t.removeClass(\"hidden\");\n\t$(widget).find(\".modularity-widget-module-title-span\").html(data.title);\n\t$(widget).find(\".modularity-widget-module-title\").val(data.title);\n};\n","declare const modularityLang: {\n\tclose: string;\n};\n\ndeclare const modularityFrontLanguage: {\n\tclose: string;\n};\n\nclass Modal {\n\tmodalContainer: HTMLDivElement | null;\n\tbody: HTMLElement;\n\tisOpen: boolean;\n\n\tconstructor() {\n\t\tthis.modalContainer = null;\n\t\tthis.body = document.body;\n\t\tthis.isOpen = false;\n\t\tthis.handleEvents();\n\t}\n\n\tprivate createModalContent(url: string) {\n\t\treturn `\n            <div class=\"modularity-modal-wrapper\">\n                <button class=\"modularity-modal-close\" data-modularity-modal-action=\"close\">&times; ${modularityLang?.close ?? modularityFrontLanguage?.close ?? \"Close\"}</button>\n                <div class=\"modularity-modal-spinner-container\" id=\"modularity-iframe-loader\"><span class=\"modularity-modal-spinner\"></span></div>\n                <iframe class=\"modularity-modal-iframe\" src=\"${url}\" frameborder=\"0\" allowtransparency></iframe>\n            </div>\n        `;\n\t}\n\n\tpublic open(url: string) {\n\t\tthis.modalContainer = document.createElement(\"div\");\n\t\tthis.modalContainer.id = \"modularity-modal\";\n\t\tthis.modalContainer.innerHTML = this.createModalContent(url);\n\n\t\tthis.body.appendChild(this.modalContainer);\n\t\tthis.body.classList.add(\"modularity-modal-open\");\n\t\tthis.isOpen = true;\n\t}\n\n\tprivate close() {\n\t\tif (this.modalContainer) {\n\t\t\tthis.body.removeChild(this.modalContainer);\n\t\t\tthis.body.classList.remove(\"modularity-modal-open\");\n\t\t\tthis.isOpen = false;\n\t\t}\n\t}\n\n\tprivate handleEvents() {\n\t\tthis.body.addEventListener(\"click\", (e) => {\n\t\t\tconst target = e.target as HTMLElement;\n\t\t\tif (\n\t\t\t\ttarget &&\n\t\t\t\ttarget.getAttribute(\"data-modularity-modal-action\") === \"close\"\n\t\t\t) {\n\t\t\t\te.preventDefault();\n\t\t\t\tthis.close();\n\t\t\t}\n\t\t});\n\t}\n}\n\nexport default Modal;\n","import Autosave from \"./editor/autosave\";\nimport DragAndDrop from \"./editor/dragAndDrop\";\nimport Module from \"./editor/module\";\nimport Thickbox from \"./editor/thickbox\";\nimport Validate from \"./editor/validate\";\n\nimport Helpers from \"./helpers/helpers\";\nimport {\n\tensureWPApiSettings,\n\tModuleRefresher,\n} from \"./helpers/ModuleRefresher\";\nimport {\n\tModulesRestAPI,\n\tModulesRestAPIEndpoints,\n} from \"./helpers/ModulesRestAPI\";\nimport Widget from \"./helpers/widget\";\nimport Modal from \"./prompt/modal\";\n\nif (!parent.Modularity) {\n\tvar Modularity = parent.Modularity || {};\n\tModularity.Editor = Modularity.Editor || {};\n\tModularity.Editor.Autosave = new Autosave(Modularity);\n\tModularity.Editor.DragAndDrop = new DragAndDrop(Modularity);\n\tModularity.Editor.Module = new Module(Modularity);\n\tModularity.Editor.Thickbox = new Thickbox(Modularity);\n\tModularity.Editor.Validate = new Validate(Modularity);\n\n\tModularity.Helpers = Modularity.Helpers || {};\n\tModularity.Helpers.Helpers = new Helpers(Modularity);\n\tModularity.Helpers.Widget = new Widget(Modularity);\n\n\tModularity.Prompt = Modularity.Prompt || {};\n\n\tModularity.Prompt.Modal = new Modal(Modularity);\n\n\tparent.Modularity = Modularity;\n\n\t(($) => {\n\t\t$('input[type=\"checkbox\"].sidebar-area-activator').on(\n\t\t\t\"click\",\n\t\t\tfunction (e) {\n\t\t\t\tvar isChecked = $(this).is(\":checked\");\n\t\t\t\tvar value = $(this).attr(\"value\");\n\n\t\t\t\tif (e.shiftKey) {\n\t\t\t\t\tif (!isChecked) {\n\t\t\t\t\t\t$(\n\t\t\t\t\t\t\t'input.sidebar-area-activator[type=\"checkbox\"][value=\"' +\n\t\t\t\t\t\t\t\tvalue +\n\t\t\t\t\t\t\t\t'\"]',\n\t\t\t\t\t\t).attr(\"checked\", false);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$(\n\t\t\t\t\t\t\t'input.sidebar-area-activator[type=\"checkbox\"][value=\"' +\n\t\t\t\t\t\t\t\tvalue +\n\t\t\t\t\t\t\t\t'\"]',\n\t\t\t\t\t\t).attr(\"checked\", true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t);\n\t})(jQuery);\n\n\t(($) => {\n\t\t// Show spinner when clicking save on Modularity options page\n\t\t$(\"#modularity-options #publish\").on(\"click\", function () {\n\t\t\t$(this).siblings(\".spinner\").css(\"visibility\", \"visible\");\n\t\t});\n\n\t\t// Remove the first menu item in the Modularity submenu (admin menu)\n\t\t$('a.wp-first-item[href=\"admin.php?page=modularity\"]')\n\t\t\t.parent(\"li\")\n\t\t\t.remove();\n\n\t\t// Trigger autosave when switching tabs\n\t\t$(\"#modularity-tabs a\").on(\"click\", (e) => {\n\t\t\tif (wp.autosave) {\n\t\t\t\t$(window).unbind();\n\n\t\t\t\twp.autosave.server.triggerSave();\n\n\t\t\t\t$(document).ajaxComplete(() => true);\n\t\t\t}\n\n\t\t\treturn true;\n\t\t});\n\t})(jQuery);\n\n\t/* Auto scrolling content */\n\tjQuery(document).ready(($) => {\n\t\tif ($(\"#modularity-mb-modules\").length) {\n\t\t\tvar offset = $(\"#modularity-mb-modules\").offset();\n\t\t\t$(document).scroll(() => {\n\t\t\t\tif (\n\t\t\t\t\t$(window).scrollTop() + 50 > offset.top &&\n\t\t\t\t\t!$(\"#modularity-mb-modules\").hasClass(\"is-fixed\")\n\t\t\t\t) {\n\t\t\t\t\t$(\"#modularity-mb-modules\").addClass(\"is-fixed\");\n\t\t\t\t} else if (\n\t\t\t\t\t$(window).scrollTop() + 50 < offset.top &&\n\t\t\t\t\t$(\"#modularity-mb-modules\").hasClass(\"is-fixed\")\n\t\t\t\t) {\n\t\t\t\t\t$(\"#modularity-mb-modules\").removeClass(\"is-fixed\");\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t$(\".modularity-edit-module a\").on(\"click\", (e) => {\n\t\t\te.preventDefault();\n\n\t\t\tModularity.Editor.Thickbox.postAction = \"edit-inline-not-saved\";\n\t\t\tModularity.Prompt.Modal.open($(e.target).closest(\"a\").attr(\"href\"));\n\t\t});\n\t});\n}\n\n(() => {\n\ttry {\n\t\tensureWPApiSettings();\n\n\t\tconst { root, nonce } = window.wpApiSettings;\n\t\tconst fetch = window.fetch.bind(window);\n\t\tconst endpoints = ModulesRestAPIEndpoints(root);\n\t\tconst restAPI = new ModulesRestAPI(fetch, endpoints, nonce);\n\n\t\tnew ModuleRefresher(restAPI).refreshModules();\n\t} catch (error) {\n\t\tconsole.warn(error);\n\t}\n})();\n"],"names":["lModularity","editingModule","Module","$"],"mappings":"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"}