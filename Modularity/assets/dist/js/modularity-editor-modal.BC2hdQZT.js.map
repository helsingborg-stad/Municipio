{"version":3,"file":"modularity-editor-modal.BC2hdQZT.js","sources":["../../../source/js/modularity-editor-modal.js"],"sourcesContent":["document.addEventListener(\"DOMContentLoaded\", () => {\n\t(function ($) {\n\t\t/**\n\t\t * Add new post callback\n\t\t */\n\t\tif (\n\t\t\tparent.Modularity.Editor.Thickbox.postAction == \"add\" &&\n\t\t\tmodularity_post_action == \"\"\n\t\t) {\n\t\t\tparent.Modularity.Editor.Thickbox.modulePostCreated(modularity_post_id);\n\t\t}\n\n\t\tif (parent.Modularity.Editor.Thickbox.postAction == \"edit-inline-saved\") {\n\t\t\tparent.location.reload();\n\t\t}\n\n\t\t/**\n\t\t * Edit post callback\n\t\t */\n\t\tif (\n\t\t\tparent.Modularity.Editor.Thickbox.postAction == \"edit\" &&\n\t\t\tmodularity_post_action == \"\"\n\t\t) {\n\t\t\tjQuery(document).on(\"click\", \"#publish\", (e) => {\n\t\t\t\tparent.Modularity.Editor.Thickbox.postAction = \"add\";\n\t\t\t});\n\t\t}\n\n\t\t/**\n\t\t * Edit post callback\n\t\t */\n\t\tif (\n\t\t\tparent.Modularity.Editor.Thickbox.postAction == \"edit-inline-not-saved\"\n\t\t) {\n\t\t\tjQuery(document).on(\"click\", \"#publish\", (e) => {\n\t\t\t\tparent.Modularity.Editor.Thickbox.postAction = \"edit-inline-saved\";\n\t\t\t});\n\t\t}\n\n\t\t/**\n\t\t * Import post modifications and callback\n\t\t */\n\t\tif (parent.Modularity.Editor.Thickbox.postAction == \"import\") {\n\t\t\t$('.check-column input[type=\"checkbox\"]').remove();\n\t\t\t$(\".wp-list-table\").addClass(\"modularity-wp-list-table\");\n\t\t\t$(\"tbody .check-column\")\n\t\t\t\t.addClass(\"modularity-import-column\")\n\t\t\t\t.append(\n\t\t\t\t\t'<button class=\"button modularity-import-button\" data-modularity-action=\"import\">Import</button>',\n\t\t\t\t);\n\t\t\t$(\"#posts-filter\").append(\n\t\t\t\t'<input type=\"hidden\" name=\"is_thickbox\" value=\"true\">',\n\t\t\t);\n\t\t\t$(\".modularity-import-column label\").addClass(\"screen-reader-text\");\n\n\t\t\t$(document).on(\"click\", '[data-modularity-action=\"import\"]', (e) => {\n\t\t\t\te.preventDefault();\n\n\t\t\t\tvar postId = $(e.target).closest(\"tr\").attr(\"id\");\n\t\t\t\tpostId = postId.split(\"-\")[1];\n\n\t\t\t\tvar module = parent.Modularity.Editor.Module.isEditingModule();\n\n\t\t\t\tvar request = {\n\t\t\t\t\taction: \"get_post\",\n\t\t\t\t\tid: postId,\n\t\t\t\t};\n\n\t\t\t\t$(\"body\").addClass(\"modularity-loader-takeover\");\n\n\t\t\t\t$.post(\n\t\t\t\t\tajaxurl,\n\t\t\t\t\trequest,\n\t\t\t\t\t(response) => {\n\t\t\t\t\t\tvar data = {\n\t\t\t\t\t\t\tpost_id: response.ID,\n\t\t\t\t\t\t\ttitle: response.post_title,\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tparent.Modularity.Editor.Module.updateModule(module, data);\n\t\t\t\t\t\tparent.Modularity.Editor.Autosave.save(\"form\");\n\t\t\t\t\t\tparent.Modularity.Prompt.Modal.close();\n\t\t\t\t\t},\n\t\t\t\t\t\"json\",\n\t\t\t\t);\n\t\t\t});\n\t\t}\n\n\t\t/**\n\t\t * Import post modifications and callback\n\t\t */\n\t\tif (parent.Modularity.Editor.Thickbox.postAction == \"import-widget\") {\n\t\t\t$('.check-column input[type=\"checkbox\"]').remove();\n\t\t\t$(\".wp-list-table\").addClass(\"modularity-wp-list-table\");\n\t\t\t$(\"tbody .check-column\")\n\t\t\t\t.addClass(\"modularity-import-column\")\n\t\t\t\t.append(\n\t\t\t\t\t'<button class=\"button modularity-import-button\" data-modularity-action=\"import\">Import</button>',\n\t\t\t\t);\n\n\t\t\t$(document).on(\"click\", '[data-modularity-action=\"import\"]', (e) => {\n\t\t\t\te.preventDefault();\n\n\t\t\t\tvar postId = $(e.target).closest(\"tr\").attr(\"id\");\n\t\t\t\tpostId = postId.split(\"-\")[1];\n\n\t\t\t\tvar widget = parent.Modularity.Helpers.Widget.isEditingWidget();\n\n\t\t\t\tvar request = {\n\t\t\t\t\taction: \"get_post\",\n\t\t\t\t\tid: postId,\n\t\t\t\t};\n\n\t\t\t\t$(\"body\").addClass(\"modularity-loader-takeover\");\n\n\t\t\t\t$.post(\n\t\t\t\t\tajaxurl,\n\t\t\t\t\trequest,\n\t\t\t\t\t(response) => {\n\t\t\t\t\t\tvar data = {\n\t\t\t\t\t\t\tpost_id: response.ID,\n\t\t\t\t\t\t\ttitle: response.post_title,\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tparent.Modularity.Helpers.Widget.updateWidget(widget, data);\n\t\t\t\t\t\tparent.Modularity.Prompt.Modal.close();\n\t\t\t\t\t},\n\t\t\t\t\t\"json\",\n\t\t\t\t);\n\t\t\t});\n\t\t}\n\t})(jQuery);\n});\n"],"names":[],"mappings":"AAAA,SAAS,iBAAiB,mBAAoB,IAAM,EAClD,SAAU,EAAG,CAKZ,OAAO,WAAW,OAAO,SAAS,YAAc,OAChD,wBAA0B,IAE1B,OAAO,WAAW,OAAO,SAAS,kBAAkB,kBAAkB,EAGnE,OAAO,WAAW,OAAO,SAAS,YAAc,qBACnD,OAAO,SAAS,OAAM,EAOtB,OAAO,WAAW,OAAO,SAAS,YAAc,QAChD,wBAA0B,IAE1B,OAAO,QAAQ,EAAE,GAAG,QAAS,WAAa,GAAM,CAC/C,OAAO,WAAW,OAAO,SAAS,WAAa,KAChD,CAAC,EAOD,OAAO,WAAW,OAAO,SAAS,YAAc,yBAEhD,OAAO,QAAQ,EAAE,GAAG,QAAS,WAAa,GAAM,CAC/C,OAAO,WAAW,OAAO,SAAS,WAAa,mBAChD,CAAC,EAME,OAAO,WAAW,OAAO,SAAS,YAAc,WACnD,EAAE,sCAAsC,EAAE,OAAM,EAChD,EAAE,gBAAgB,EAAE,SAAS,0BAA0B,EACvD,EAAE,qBAAqB,EACrB,SAAS,0BAA0B,EACnC,OACA,iGACL,EACG,EAAE,eAAe,EAAE,OAClB,uDACJ,EACG,EAAE,iCAAiC,EAAE,SAAS,oBAAoB,EAElE,EAAE,QAAQ,EAAE,GAAG,QAAS,oCAAsC,GAAM,CACnE,EAAE,eAAc,EAEhB,IAAI,OAAS,EAAE,EAAE,MAAM,EAAE,QAAQ,IAAI,EAAE,KAAK,IAAI,EAChD,OAAS,OAAO,MAAM,GAAG,EAAE,CAAC,EAE5B,IAAI,OAAS,OAAO,WAAW,OAAO,OAAO,gBAAe,EAExD,QAAU,CACb,OAAQ,WACR,GAAI,MACT,EAEI,EAAE,MAAM,EAAE,SAAS,4BAA4B,EAE/C,EAAE,KACD,QACA,QACC,UAAa,CACb,IAAI,KAAO,CACV,QAAS,SAAS,GAClB,MAAO,SAAS,UACvB,EAEM,OAAO,WAAW,OAAO,OAAO,aAAa,OAAQ,IAAI,EACzD,OAAO,WAAW,OAAO,SAAS,KAAK,MAAM,EAC7C,OAAO,WAAW,OAAO,MAAM,MAAK,CACrC,EACA,MACL,CACG,CAAC,GAME,OAAO,WAAW,OAAO,SAAS,YAAc,kBACnD,EAAE,sCAAsC,EAAE,OAAM,EAChD,EAAE,gBAAgB,EAAE,SAAS,0BAA0B,EACvD,EAAE,qBAAqB,EACrB,SAAS,0BAA0B,EACnC,OACA,iGACL,EAEG,EAAE,QAAQ,EAAE,GAAG,QAAS,oCAAsC,GAAM,CACnE,EAAE,eAAc,EAEhB,IAAI,OAAS,EAAE,EAAE,MAAM,EAAE,QAAQ,IAAI,EAAE,KAAK,IAAI,EAChD,OAAS,OAAO,MAAM,GAAG,EAAE,CAAC,EAE5B,IAAI,OAAS,OAAO,WAAW,QAAQ,OAAO,gBAAe,EAEzD,QAAU,CACb,OAAQ,WACR,GAAI,MACT,EAEI,EAAE,MAAM,EAAE,SAAS,4BAA4B,EAE/C,EAAE,KACD,QACA,QACC,UAAa,CACb,IAAI,KAAO,CACV,QAAS,SAAS,GAClB,MAAO,SAAS,UACvB,EAEM,OAAO,WAAW,QAAQ,OAAO,aAAa,OAAQ,IAAI,EAC1D,OAAO,WAAW,OAAO,MAAM,MAAK,CACrC,EACA,MACL,CACG,CAAC,EAEH,GAAG,MAAM,CACV,CAAC"}