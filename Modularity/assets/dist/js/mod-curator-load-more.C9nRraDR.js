var __defProp=Object.defineProperty;var __name=(target,value)=>__defProp(target,"name",{value,configurable:!0});function loadMoreHandler(event){event.preventDefault();const parent=event.target.closest(".mod-curator-load-more"),embedCode=parent.getAttribute("data-code"),itemCount=parseInt(parent.getAttribute("data-item-count")),itemsPerPage=parseInt(parent.getAttribute("data-items-per-page"));let itemsLoaded=parseInt(parent.getAttribute("data-items-loaded"));const placeholderBlocks=parent.closest(".modularity-socialmedia-container").querySelector(".modularity-socialmedia__content").querySelectorAll(".modularity-socialmedia__item--placeholder");placeholderBlocks.forEach(block=>{block.classList.remove("u-display--none")}),itemsLoaded<itemCount?getFeed(embedCode,itemsPerPage,itemsLoaded).then(response=>{response.success&&response.posts&&updateItems(response.posts,parent)}).catch(error=>{console.error(error)}):(placeholderBlocks.forEach(block=>{block.remove()}),parent.innerHTML=curator.noMoreItems)}__name(loadMoreHandler,"loadMoreHandler");function getFeed(embedCode,limit,offset){const url=curator.ajaxurl,data=new FormData;return data.append("action","mod_curator_get_feed"),data.append("nonce",curator.nonce),data.append("embed-code",embedCode),data.append("limit",limit),data.append("offset",offset),fetch(url,{method:"POST",body:data}).then(response=>{if(response.ok)return response.json();throw new Error("Network response was not ok")})}__name(getFeed,"getFeed");function updateItems(posts,button){renderPosts(posts,button);const newItemsLoaded=parseInt(button.getAttribute("data-items-loaded"))+posts.length;button.setAttribute("data-items-loaded",newItemsLoaded)}__name(updateItems,"updateItems");function renderPosts(posts,button){const url=curator.ajaxurl,data=new FormData;data.append("action","mod_curator_load_more"),data.append("nonce",curator.nonce),data.append("layout",button.getAttribute("data-layout")),data.append("posts",JSON.stringify(posts));const socialMediaBlocks=button.closest(".modularity-socialmedia-container").querySelector(".modularity-socialmedia__content"),placeholderBlock=socialMediaBlocks.querySelector(".modularity-socialmedia__item--placeholder"),placeholderBlocks=socialMediaBlocks.querySelectorAll(".modularity-socialmedia__item--placeholder"),columnClasses=socialMediaBlocks.querySelector(".modularity-socialmedia__item").getAttribute("class");data.append("columnClasses",columnClasses),fetch(url,{method:"POST",body:data}).then(response=>{if(response.ok)return response.text();throw new Error("Network response was not ok")}).then(html=>{placeholderBlock.insertAdjacentHTML("beforebegin",html)}).catch(error=>{console.error(error)}).finally(()=>{placeholderBlocks.forEach(block=>{block.classList.add("u-display--none")})})}__name(renderPosts,"renderPosts");document.addEventListener("DOMContentLoaded",()=>{Array.from(document.getElementsByClassName("mod-curator-load-more")).forEach(button=>button.addEventListener("click",loadMoreHandler))});
//# sourceMappingURL=mod-curator-load-more.C9nRraDR.js.map
